00001E7E Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 06/01/2020 20:20:34

00000000                             1  ; =============================================================================   
00000000                             2  ; TITLE    : KABOOM GAME
00000000                             3  ; AUTHOR   :
00000000                             4  ; CREATION :
00000000                             5  ; =============================================================================
00000000                             6  
00001000                             7              ORG     $1000
00001000                             8  
00001000                             9  ; --- CODE INCLUDES -----------------------------------------------------------
00001000                            10  
00001000                            11              INCLUDE "SYSCONST.X68"          ; SYSTEM CONSTANTS
00001000                            12  ; =============================================================================
00001000                            13  ; SYSTEM CONSTANTS
00001000                            14  ; =============================================================================
00001000                            15  
00001000                            16  ; --- TRAP RELATED CONSTANTS --------------------------------------------------
00001000                            17  
00001000  =00000000                 18  KBDTRAP     EQU     0                       ; KEYBOARD UPDATE TRAP
00001000  =00000001                 19  SCRTRAP     EQU     1                       ; SCREEN REFRESH TRAP
00001000                            20  
00001000                            21  ; --- KEY CODES (EASy68K)
00001000                            22  
00001000  =00000020                 23  KBDCHRSP    EQU     $20                     ; SPACE KEY
00001000  =0000004D                 24  KBDCHRMK    EQU     'M'                     ; M KEY
00001000  =00000010                 25  KBDCHRSH    EQU     $10                     ; SHIFT KEY
00001000  =00000050                 26  KBDCHRPK    EQU     'P'                     ; P KEY
00001000  =00000025                 27  KBDCHRLF    EQU     $25                     ; LEFT KEY
00001000  =00000026                 28  KBDCHRUP    EQU     $26                     ; UP KEY
00001000  =00000027                 29  KBDCHRRT    EQU     $27                     ; RIGHT KEY
00001000  =00000028                 30  KBDCHRDN    EQU     $28                     ; DOWN KEY
00001000                            31  
00001000                            32  ; --- KEYBOARD MAPPING --------------------------------------------------------
00001000                            33  
00001000  =00000025                 34  KBDLEFT     EQU     KBDCHRLF                ; LEFT BUTTON
00001000  =00000026                 35  KBDUP       EQU     KBDCHRUP                ; UP BUTTON
00001000  =00000027                 36  KBDRIGHT    EQU     KBDCHRRT                ; RIGHT BUTTON
00001000  =00000028                 37  KBDDOWN     EQU     KBDCHRDN                ; DOWN BUTTON
00001000  =00000020                 38  KBDFIRE1    EQU     KBDCHRSP                ; FIRE 1 BUTTON
00001000  =0000004D                 39  KBDFIRE2    EQU     KBDCHRMK                ; FIRE 2 BUTTON
00001000  =00000010                 40  KBDFIRE3    EQU     KBDCHRSH                ; FIRE 3 BUTTON
00001000  =00000050                 41  KBDPAUSE    EQU     KBDCHRPK                ; PAUSE BUTTON
00001000                            42  
00001000                            43  ; --- KEYBOARD BITFIELD MASKS -------------------------------------------------
00001000                            44  ; CONVENIENCE CONSTANTS TO ACCESS THE FOLLOWING BIT-FIELD.
00001000                            45  ; THIS BIT-FIELD IS USED BY SYSTEM VARS (KBDVAL) AND (KBDEDGE).
00001000                            46  ; +---+---+---+---+---+---+---+---+
00001000                            47  ; | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
00001000                            48  ; +---+---+---+---+---+---+---+---+
00001000                            49  ;   |   |   |   |   |   |   |   |
00001000                            50  ;   |   |   |   |   |   |   |   +---------- LEFT BUTTON
00001000                            51  ;   |   |   |   |   |   |   +-------------- UP BUTTON
00001000                            52  ;   |   |   |   |   |   +------------------ RIGHT BUTTON
00001000                            53  ;   |   |   |   |   +---------------------- DOWN BUTTON
00001000                            54  ;   |   |   |   +-------------------------- FIRE 1 BUTTON
00001000                            55  ;   |   |   +------------------------------ FIRE 2 BUTTON
00001000                            56  ;   |   +---------------------------------- FIRE 3 BUTTON
00001000                            57  ;   +-------------------------------------- PAUSE BUTTON
00001000                            58  
00001000  =00000001                 59  KBDMSKLF    EQU     %00000001
00001000  =00000002                 60  KBDMSKUP    EQU     %00000010
00001000  =00000004                 61  KBDMSKRT    EQU     %00000100
00001000  =00000008                 62  KBDMSKDN    EQU     %00001000
00001000  =00000010                 63  KBDMSKF1    EQU     %00010000
00001000  =00000020                 64  KBDMSKF2    EQU     %00100000
00001000  =00000040                 65  KBDMSKF3    EQU     %01000000
00001000  =00000080                 66  KBDMSKPS    EQU     %10000000
00001000                            67  
00001000                            68  ; --- KEYBOARD BITFIELD POSITIONS ---------------------------------------------
00001000                            69  
00001000  =00000000                 70  KBDBITLF    EQU     0
00001000  =00000001                 71  KBDBITUP    EQU     1
00001000  =00000002                 72  KBDBITRT    EQU     2
00001000  =00000003                 73  KBDBITDN    EQU     3
00001000  =00000004                 74  KBDBITF1    EQU     4
00001000  =00000005                 75  KBDBITF2    EQU     5
00001000  =00000006                 76  KBDBITF3    EQU     6
00001000  =00000007                 77  KBDBITPS    EQU     7
00001000                            78  
00001000                            79  ; --- SCREEN RELATED CONSTANTS ------------------------------------------------
00001000                            80  
00001000  =00000280                 81  SCRWIDTH    EQU     640                     ; SCREEN WIDTH (PIXELS)
00001000  =000001E0                 82  SCRHEIGH    EQU     480                     ; SCREEN HEIGHT (PIXELS)
00001000  =00000001                 83  SCRIRQ      EQU     1                       ; SCREEN INTERRUPT NUMBER
00001000  =00000014                 84  SCRTIM      EQU     20                      ; SCREEN TIMER (MS)
00001000                            85  
00001000                            86  ; --- DYNAMIC MEMORY CONSTANTS ------------------------------------------------
00001000                            87  
00001000  =00000040                 88  DMMBSIZE    EQU     64                      ; BLOCK SIZE (BYTES). POWER OF TWO
00001000  =00000032                 89  DMMBNUM     EQU     50                      ; NUMBER OF BLOCKS
00001000  =00000000                 90  DMMSYSID    EQU     0                       ; SYSTEM OWNER ID (MUST BE 0)
00001000  =00000000                 91  -------------------- end include --------------------
00001000                            92              INCLUDE "SYSTEM.X68"            ; SYSTEM CODE
00001000                            93  ; =============================================================================
00001000                            94  ; SYSTEM MANAGEMENT (SYSTEM CODE)
00001000                            95  ; =============================================================================
00001000                            96  ;Francisco José Muñoz Navarro 43480416c
00001000                            97  ;Joan Alcover Lladó 45187596w
00001000                            98  ;Francesc Nova Prieto 43483419x
00001000                            99  ; -----------------------------------------------------------------------------
00001000                           100  SYSINIT
00001000                           101              
00001000                           102  ; INITIALIZES THE SYSTEM
00001000                           103  ; INPUT    - NONE
00001000                           104  ; OUTPUT   - NONE
00001000                           105  ; MODIFIES - NONE
00001000                           106  ; -----------------------------------------------------------------------------
00001000  205F                     107              MOVE.L  (A7)+,A0                ; GET RETURN ADDRESS
00001002  4EB9 000010A6            108              JSR     KBDINIT                 ; INIT KEYBOARD
00001008  4EB9 0000101C            109              JSR     SCRINIT                 ; INIT SCREEN
0000100E  4EB9 00001176            110              JSR     DMMINIT                 ; INIT DYNAMIC MEMORY
00001014  027C DFFF                111              ANDI.W  #$DFFF,SR               ; SWITCH TO USER
00001018  2F08                     112              MOVE.L  A0,-(A7)                ; PUT RETURN ADDRESS
0000101A  4E75                     113              RTS
0000101C                           114  
0000101C                           115  ; =============================================================================
0000101C                           116  ; SCREEN MANAGEMENT (SYSTEM CODE)
0000101C                           117  ; =============================================================================
0000101C                           118  
0000101C                           119  ; -----------------------------------------------------------------------------
0000101C                           120  SCRINIT
0000101C                           121  ; INITIALIZES THE SCREEN, SCREEN-RELATED INTERRUPT AND VARS.
0000101C                           122  ; INPUT    - NONE
0000101C                           123  ; OUTPUT   - NONE
0000101C                           124  ; MODIFIES - WHATEVER IS REQUIRED, NO NEED TO RESTORE REGISTERS.
0000101C                           125  ; -----------------------------------------------------------------------------
0000101C                           126              ; TO DO:
0000101C                           127              
0000101C                           128              ; - DISABLE INTS (SET INT BITS IN SR TO 111)
0000101C  007C 0700                129              ORI.W #$0700,SR
00001020                           130              
00001020                           131              ; - INSTALL SCRUPD INTO TRAP SCRTRAP
00001020  21FC 0000108C 0084       132              MOVE.L #SCRUPD,($80+SCRTRAP*4)
00001028                           133              
00001028                           134              ; - SET RESOLUTION TO SCRWIDTH X SCRHEIGHT
00001028  103C 0021                135              MOVE.B #33,D0
0000102C  223C 028001E0            136              MOVE.L #SCRWIDTH<<16|SCRHEIGH,D1
00001032  4E4F                     137              TRAP #15
00001034                           138              
00001034                           139              ; - SET WINDOWED MODE
00001034  7201                     140              MOVE.L #1,D1
00001036  4E4F                     141              TRAP #15     
00001038                           142        
00001038                           143              ; - CLEAR VISIBLE BUFFER
00001038  323C FF00                144              MOVE.W #$FF00,D1
0000103C  103C 000B                145              MOVE.B #11,D0
00001040  4E4F                     146              TRAP #15
00001042                           147  
00001042                           148  
00001042                           149              ; - ENABLE DOUBLE BUFFER
00001042  705C                     150              MOVE.L #92,D0
00001044  7211                     151              MOVE.L #17,D1
00001046  4E4F                     152              TRAP #15
00001048                           153              
00001048                           154              ; - CLEAR HIDDEN BUFFER           
00001048  323C FF00                155              MOVE.W #$FF00,D1
0000104C  103C 000B                156              MOVE.B #11,D0
00001050  4E4F                     157              TRAP #15    
00001052                           158              
00001052                           159              
00001052                           160              ; - INSTALL SCRISR FOR IRQ SCRIRQ (IRQ INTERRUPT VECTOR BEGINS
00001052                           161              ;   AT $60. INSTALLATION IS SIMILAR TO TRAP INSTALLATION)
00001052  21FC 0000107E 0064       162              MOVE.L #SCRISR,($60+SCRIRQ*4)
0000105A                           163              
0000105A                           164              
0000105A                           165              ; - ENABLE AUTO-IRQ EVERY SCRTIM MS FOR IRQ SCRIRQ (SEE TRAP #15
0000105A                           166              ;   TASK 32)
0000105A                           167              
0000105A  123C 0006                168              MOVE.B #6,D1
0000105E  103C 0020                169              MOVE.B #32,D0
00001062  7401                     170              MOVE.L #SCRIRQ,D2
00001064  843C 0080                171              OR.B #$80,D2
00001068  7614                     172              MOVE.L #SCRTIM,D3
0000106A                           173              
0000106A  4E4F                     174              TRAP #15
0000106C                           175              
0000106C                           176              ; - CLEAR SCRINTCT AND SCRCYCCT
0000106C  4239 00001EDE            177              CLR.B SCRINTCT
00001072  4239 00001EDF            178              CLR.B SCRCYCCT
00001078                           179              ; - ENABLE INTS (SET INT BITS IN SR TO 000)
00001078  027C F8FF                180              ANDI.W #$F8FF,SR
0000107C                           181              
0000107C  4E75                     182              RTS
0000107E                           183  
0000107E                           184  ; -----------------------------------------------------------------------------
0000107E                           185  SCRISR
0000107E                           186  ; SCREEN TIMER ISR. INCREASES THE INTERRUPT COUNTER AND UPDATES DOUBLE BUFFER.
0000107E                           187  ; INPUT    - NONE
0000107E                           188  ; OUTPUT   - NONE
0000107E                           189  ; MODIFIES - NONE
0000107E                           190  ; -----------------------------------------------------------------------------
0000107E  5239 00001EDE            191              ADDQ.B  #1,(SCRINTCT)           ; UPDATE INT FLAG/COUNTER
00001084  5239 00001EDF            192              ADDQ.B  #1,(SCRCYCCT)           ; UPDATE CYCLE COUNTER
0000108A  4E73                     193              RTE
0000108C                           194  
0000108C                           195  ; -----------------------------------------------------------------------------
0000108C                           196  SCRUPD
0000108C                           197  ; TRAP SERVICE ROUTINE IN CHARGE OF VISUALIZING CURRENT FRAME AND CLEARING
0000108C                           198  ; BUFFER FOR THE NEXT ONE.
0000108C                           199  ; INPUT    - NONE
0000108C                           200  ; OUTPUT   - NONE
0000108C                           201  ; MODIFIES - NONE
0000108C                           202  ; -----------------------------------------------------------------------------
0000108C                           203              ; TO DO: UPDATE DOUBLE BUFFER AND CLEAR HIDDEN BUFFER
0000108C  48E7 C000                204              MOVEM.L D0-D1,-(A7)
00001090  103C 005E                205              MOVE.B #94,D0
00001094  4E4F                     206              TRAP #15
00001096  323C FF00                207              MOVE.W #$FF00,D1
0000109A  103C 000B                208              MOVE.B #11,D0
0000109E  4E4F                     209              TRAP #15 
000010A0  4CDF 0003                210              MOVEM.L (A7)+,D0-D1 
000010A4  4E73                     211              RTE
000010A6                           212  
000010A6                           213  ; =============================================================================
000010A6                           214  ; KEYBOARD MANAGEMENT (SYSTEM CODE)
000010A6                           215  ; =============================================================================
000010A6                           216  
000010A6                           217  ; -----------------------------------------------------------------------------
000010A6                           218  KBDINIT
000010A6                           219  ; INITIALIZES THE SYSTEM VARIABLES KBDSYS AND KBDVAL
000010A6                           220  ; INPUT    - NONE
000010A6                           221  ; OUTPUT   - NONE
000010A6                           222  ; MODIFIES - NONE
000010A6                           223  ; -----------------------------------------------------------------------------
000010A6  4239 00001EDC            224              CLR.B   (KBDVAL)                ; INIT VARS
000010AC  4239 00001EDD            225              CLR.B   (KBDEDGE)
000010B2  21FC 000010BC 0080       226              MOVE.L  #KBDREAD,($80+KBDTRAP*4) ; INSTALL
000010BA  4E75                     227              RTS
000010BC                           228  
000010BC                           229  ; -----------------------------------------------------------------------------
000010BC                           230  KBDREAD
000010BC                           231  ; TRAP SERVICE ROUTINE.
000010BC                           232  ; UPDATES THE SYSTEM VARIABLES KBDEDGE AND KBDVAL ACCORDING TO THE BITFIELD
000010BC                           233  ; DESCRIBED IN SYSCONST. KBDVAL HOLDS THE CURRENT VALUES AND KBDEFGE HOLDS
000010BC                           234  ; RISING EDGES FROM PREVIOUS CALL TO THE CURRENT ONE.
000010BC                           235  ; INPUT    - NONE
000010BC                           236  ; OUTPUT   - (KBDVAL) AND (KBDEDGE)
000010BC                           237  ; MODIFIES - NONE
000010BC                           238  ; -----------------------------------------------------------------------------
000010BC                           239              ; TO DO: UPDATE KBDVAL AND KBDEDGE
000010BC                           240              
000010BC                           241              ;PARA GUARDAR EL ESTADO DE LAS TECLAS LAS CUATRO PRIMERAS EN D1 
000010BC                           242              ;Y LAS CUATRO SIGUIENTES EN D2
000010BC  48E7 E000                243              MOVEM.L D0-D2,-(A7)
000010C0  103C 0013                244              MOVE.B #19,D0
000010C4  223C 25262728            245              MOVE.L #KBDLEFT<<24+KBDUP<<16+KBDRIGHT<<8+KBDDOWN,D1
000010CA  4E4F                     246              TRAP #15
000010CC  2401                     247              MOVE.L  D1,D2
000010CE  223C 204D1050            248              MOVE.L #KBDFIRE1<<24+KBDFIRE2<<16+KBDFIRE3<<8+KBDPAUSE,D1
000010D4  4E4F                     249              TRAP #15
000010D6                           250              ;---------
000010D6                           251              ;---------
000010D6                           252              ;GUARDAMOS EL ANTIGUO VALOR DE KBDVAL PARA USARLO POSTERIORMENT          
000010D6  1039 00001EDC            253              MOVE.B KBDVAL,D0
000010DC                           254              
000010DC                           255              ;INICIALIZAMOS KBDVAL
000010DC  4239 00001EDC            256              CLR.B KBDVAL 
000010E2                           257              ;MIRAMOS CADA UNA DE LAS TECLAS SI HAN SIDO PULSADAS O NO
000010E2                           258              ;SALTAS A LA SIGUIENTE ETIQUETA SI HA SIDO PULSADA
000010E2  0802 0018                259              BTST.L #24,D2
000010E6  6700 000A                260              BEQ  .UP
000010EA  0039 0001 00001EDC       261              ORI.B #KBDMSKLF,KBDVAL 
000010F2                           262              
000010F2  0802 0010                263  .UP         BTST.L #16,D2
000010F6  6700 000A                264              BEQ  .RIGHT
000010FA  0039 0002 00001EDC       265              ORI.B #KBDMSKUP,KBDVAL 
00001102                           266  
00001102  0802 0008                267  .RIGHT      BTST.L #8,D2       
00001106  6700 000A                268              BEQ  .DOWN
0000110A  0039 0004 00001EDC       269              ORI.B #KBDMSKRT,KBDVAL 
00001112                           270              
00001112  0802 0000                271  .DOWN       BTST.L #0,D2       
00001116  6700 000A                272              BEQ  .FIRE1
0000111A  0039 0008 00001EDC       273              ORI.B #KBDMSKDN,KBDVAL  
00001122                           274              
00001122  0801 0018                275  .FIRE1      BTST.L #24,D1       
00001126  6700 000A                276              BEQ  .FIRE2
0000112A  0039 0010 00001EDC       277              ORI.B #KBDMSKF1,KBDVAL   
00001132                           278              
00001132  0801 0010                279  .FIRE2      BTST.L #16,D1       
00001136  6700 000A                280              BEQ  .FIRE3
0000113A  0039 0020 00001EDC       281              ORI.B #KBDMSKF2,KBDVAL  
00001142                           282              
00001142  0801 0008                283  .FIRE3      BTST.L #8,D1       
00001146  6700 000A                284              BEQ  .PAUSE
0000114A  0039 0040 00001EDC       285              ORI.B #KBDMSKF3,KBDVAL 
00001152                           286              
00001152  0801 0000                287  .PAUSE      BTST.L #0,D1       
00001156  6700 000A                288              BEQ  .FIN
0000115A  0039 0080 00001EDC       289              ORI.B #KBDMSKPS,KBDVAL 
00001162                           290              
00001162                           291  .FIN       ;PARA SABER EL NUEVO VALOR DE KBDEDGE ECESITAMOS COMPARAR 
00001162                           292             ;EL ATIGUO VALOR DE KBDVAL CON EL NUEVO 
00001162                           293             ;EL VALOR DE KBDEDGE ESTARA EN D0
00001162  4600                     294              NOT.B   D0
00001164  C039 00001EDC            295              AND.B   KBDVAL ,D0
0000116A  13C0 00001EDD            296              MOVE.B  D0,KBDEDGE 
00001170                           297              
00001170                           298              
00001170  4CDF 0007                299              MOVEM.L (A7)+,D0-D2         
00001174  4E73                     300              RTE
00001176                           301  
00001176                           302  ; =============================================================================
00001176                           303  ; DYNAMIC MEMORY MANAGEMENT (SYSTEM CODE)
00001176                           304  ; DYNAMIC MEMORY IS A SET OF DMMBNUM SLOTS OF DMMBSIZE BYTES EACH ONE.
00001176                           305  ; DMMBSIZE MUST BE POWER OF TWO. A SLOT HAS:
00001176                           306  ; - HEADER - 1 WORD. SPECIFIES THE OWNER (0 MEANS OWNED BY SYSTEM)
00001176                           307  ; - DATA   - DMMBSIZE - 2 BYTES. MAY CONTAIN VARS AND ANY KIND OF DATA RELATED
00001176                           308  ;            THE THE OWNER. IF OWNER==0, DATA IS MEANINGLESS.
00001176                           309  ; =============================================================================
00001176                           310  
00001176                           311  ; -----------------------------------------------------------------------------
00001176                           312  DMMINIT
00001176                           313  ; INITIALIZES THE DYNAMIC MEMORY TO ALL OWNED BY SYSTEM.
00001176                           314  ; INPUT    - NONE
00001176                           315  ; OUTPUT   - NONE
00001176                           316  ; MODIFIES - NONE
00001176                           317  ; -----------------------------------------------------------------------------
00001176  48E7 8080                318              MOVEM.L D0/A0,-(A7)
0000117A  41F9 00001F00            319              LEA     DMMDATA,A0
00001180  303C 0031                320              MOVE.W  #DMMBNUM-1,D0
00001184  30BC 0000                321  .LOOP       MOVE.W  #DMMSYSID,(A0)
00001188  D1FC 00000040            322              ADD.L   #DMMBSIZE,A0
0000118E  51C8 FFF4                323              DBRA.W  D0,.LOOP
00001192  4CDF 0101                324              MOVEM.L (A7)+,D0/A0
00001196  4E75                     325              RTS
00001198                           326  
00001198                           327  ; -----------------------------------------------------------------------------
00001198                           328  DMMFIRST
00001198                           329  ; SEARCHES THE FIRST MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001198                           330  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001198                           331  ; INPUT    - NONE
00001198                           332  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001198                           333  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001198                           334  ; -----------------------------------------------------------------------------
00001198  41F9 00001F00            335              LEA     DMMDATA,A0
0000119E  4A58                     336  DMMFRLOP    TST.W   (A0)+
000011A0  6600 0016                337              BNE     DMMFRFND
000011A4  D1FC 0000003E            338              ADD.L   #DMMBSIZE-2,A0
000011AA  B1FC 00002B7F            339  DMMFRCOM    CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
000011B0  6DEC                     340              BLT     DMMFRLOP
000011B2  207C 00000000            341              MOVE.L  #0,A0
000011B8  4E75                     342  DMMFRFND    RTS
000011BA                           343  
000011BA                           344  ; -----------------------------------------------------------------------------
000011BA                           345  DMMNEXT
000011BA                           346  ; SEARCHES THE NEXT MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
000011BA                           347  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
000011BA                           348  ; INPUT    - A0   : POINTER WITHIN THE CURRENT SLOT
000011BA                           349  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
000011BA                           350  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000011BA                           351  ; -----------------------------------------------------------------------------
000011BA  2F00                     352              MOVE.L  D0,-(A7)
000011BC  2008                     353              MOVE.L  A0,D0
000011BE  C0BC FFFFFFC0            354              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
000011C4  0680 00000040            355              ADD.L   #DMMBSIZE,D0
000011CA  2040                     356              MOVE.L  D0,A0
000011CC  201F                     357              MOVE.L  (A7)+,D0
000011CE  60DA                     358              BRA     DMMFRCOM
000011D0                           359  
000011D0                           360  ; -----------------------------------------------------------------------------
000011D0                           361  DMMFRSTO
000011D0                           362  ; SEARCHES THE FIRST MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
000011D0                           363  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
000011D0                           364  ; INPUT    - D0.W : ID TO SEARCH
000011D0                           365  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
000011D0                           366  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000011D0                           367  ; -----------------------------------------------------------------------------
000011D0  41F9 00001F00            368              LEA     DMMDATA,A0
000011D6  B058                     369  DMMFLOOP    CMP.W   (A0)+,D0
000011D8  6700 0016                370              BEQ     DMMFFND
000011DC  D1FC 0000003E            371              ADD.L   #DMMBSIZE-2,A0
000011E2  B1FC 00002B7F            372  DMMFCOM     CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
000011E8  6DEC                     373              BLT     DMMFLOOP
000011EA  207C 00000000            374              MOVE.L  #0,A0
000011F0  4E75                     375  DMMFFND     RTS
000011F2                           376  
000011F2                           377  ; -----------------------------------------------------------------------------
000011F2                           378  DMMNEXTO
000011F2                           379  ; SEARCHES THE NEXT MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
000011F2                           380  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
000011F2                           381  ; INPUT    - D0.W : ID TO SEARCH
000011F2                           382  ;            A0   : POINTER WITHIN THE CURRENT SLOT
000011F2                           383  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
000011F2                           384  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000011F2                           385  ; -----------------------------------------------------------------------------
000011F2  2F00                     386              MOVE.L  D0,-(A7)
000011F4  2008                     387              MOVE.L  A0,D0
000011F6  C0BC FFFFFFC0            388              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
000011FC  0680 00000040            389              ADD.L   #DMMBSIZE,D0
00001202  2040                     390              MOVE.L  D0,A0
00001204  201F                     391              MOVE.L  (A7)+,D0
00001206  60DA                     392              BRA     DMMFCOM
00001208                           393  
00001208                           394  ; -----------------------------------------------------------------------------
00001208                           395  DMMALLOC
00001208                           396  ; SEARCHES THE FIRST FREE (SYS OWNED) SLOT, ASSIGNS TO THE SPECIFIED OWNER
00001208                           397  ; AND RETURNS A POINTER TO THE CORRESPONDING DATA (SLOT ADDRESS + 2)
00001208                           398  ; INPUT    - D0.W : ID TO ASSIGN
00001208                           399  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FREE SPACE
00001208                           400  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001208                           401  ; -----------------------------------------------------------------------------
00001208  3F00                     402              MOVE.W  D0,-(A7)
0000120A  4240                     403              CLR.W   D0
0000120C  4EB8 11D0                404              JSR     DMMFRSTO
00001210  301F                     405              MOVE.W  (A7)+,D0
00001212  B1FC 00000000            406              CMP.L   #0,A0
00001218  6700 0006                407              BEQ     .END
0000121C  3140 FFFE                408              MOVE.W  D0,-2(A0)
00001220  4E75                     409  .END        RTS
00001222                           410  
00001222                           411  ; -----------------------------------------------------------------------------
00001222                           412  DMMFREE
00001222                           413  ; FREES THE SLOT TO WHICH THE PROVIDED POINTER BELONGS BY SETTING ITS OWNED TO
00001222                           414  ; SYSTEM (0)
00001222                           415  ; INPUT    - A0   : POINTER BELONGING TO THE SLOT TO FREE
00001222                           416  ; OUTPUT   - NONE
00001222                           417  ; MODIFIES - NONE
00001222                           418  ; -----------------------------------------------------------------------------
00001222  48E7 8080                419              MOVEM.L D0/A0,-(A7)
00001226  2008                     420              MOVE.L  A0,D0
00001228  C0BC FFFFFFC0            421              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
0000122E  2040                     422              MOVE.L  D0,A0
00001230  4250                     423              CLR.W   (A0)
00001232  4CDF 0101                424              MOVEM.L (A7)+,D0/A0
00001236  4E75                     425              RTS
00001238                           426  
00001238                           427  
00001238                           428  
00001238                           429  
00001238                           430  
00001238                           431  
00001238                           432  
00001238                           433  
00001238                           434  
00001238                           435  
00001238                           436  
00001238                           437  
00001238                           438  
00001238                           439  
00001238                           440  
00001238                           441  
00001238                           442  
00001238                           443  
00001238                           444  
00001238                           445  
00001238                           446  
00001238                           447  
00001238                           448  
00001238                           449  
00001238                           450  
00001238                           451  
00001238                           452  
00001238                           453  
00001238                           454  
00001238                           455  
00001238                           456  
00001238                           457  
00001238                           458  
00001238                           459  
00001238                           460  
00001238                           461  
00001238                           462  -------------------- end include --------------------
00001238                           463              INCLUDE "CONST.X68"             ; USER CONSTANTS
00001238                           464  ; =============================================================================
00001238                           465  ; SYSTEM CONSTANTS
00001238                           466  ; =============================================================================
00001238                           467  
00001238                           468  ; --- GAME STATES -------------------------------------------------------------
00001238                           469  
00001238  =FFFFFFFF                470  STANONE     EQU     -1                      ; PLACEHOLDER TO FORCE CHANGE
00001238  =00000000                471  STAINTR     EQU     0                       ; INTRO/PRESS FIRE STATE
00001238  =00000001                472  STAPLAY     EQU     1                       ; NORMAL GAME STATE
00001238  =00000002                473  STAGOVR     EQU     2                       ; GAME OVER STATE
00001238                           474  
00001238                           475  ; --- AGENT TYPES -------------------------------------------------------------
00001238                           476  
00001238  =00000001                477  SHTTYPE     EQU     1
00001238  =00000002                478  ASTTYPE     EQU     2
00001238  =00000003                479  XPLTYPE     EQU     3
00001238                           480  
00001238                           481  ; --- BACKGROUND RELATED CONSTANTS --------------------------------------------
00001238                           482  
00001238  =00000280                483  BCKSKYW     EQU     SCRWIDTH                ; SKY WIDTH
00001238  =00000078                484  BCKSKYH     EQU     120                     ; SKY HEIGHT
00001238  =00000280                485  BCKGRW      EQU     SCRWIDTH                ; GROUND WIDTH
00001238  =00000168                486  BCKGRH      EQU     SCRHEIGH-120            ; GROUND HEIGHT
00001238  =00FF6150                487  BCKSKYCL    EQU     $00FF6150               ; SKY COLOR
00001238  =000E6800                488  BCKGRCL     EQU     $000E6800               ; GROUND COLOR
00001238                           489  
00001238                           490  ; --- PLAYER RELATED CONSTANTS ------------------------------------------------
00001238                           491  
00001238  =00000037                492  PLRWIDTH    EQU     55                      ; PLAYER WIDTH (PIXELS)
00001238  =00000014                493  PLRHEIGH    EQU     20                      ; PLAYER HEIGHT (PIXELS)
00001238  =000001F4                494  PLRINIEN    EQU     500                     ; PLAYER INITIAL ENERGY (<SCRWIDTH)
00001238  =0000000A                495  PLRSPEED    EQU     10                      ; PLAYER SPEED (PIXELS PER INT)
00001238  =00696969                496  PLRNRMCL    EQU     $00696969               ; PLAYER NORMAL COLOR
00001238  =00FF8000                497  PLRWTRCL    EQU     $00FF8000               ; PLAYER WATER COLOR
00001238  =000000FF                498  PLRDMGCL    EQU     $000000FF               ; PLAYER DAMAGED COLOR
00001238  =00FFFFFF                499  PLRTXTCL    EQU     $00FFFFFF               ; FONT COLOR
00001238  =00000002                500  PLRTXTX     EQU     2                       ; SCORE X COORDINATE
00001238  =00000001                501  PLRTXTY     EQU     1                       ; SCORE Y COORDINATE
00001238  =00000014                502  PLRLIFEH    EQU     20                      ; HEIGHT OF LIFE BAR
00001238  =000001B8                503  PLRLIFEY    EQU     SCRHEIGH-PLRLIFEH*2     ; LIFE BAR Y POS
00001238  =000000FF                504  PLRLIFEC    EQU     $000000FF               ; LIFE BAR COLOR
00001238  =00000001                505  PLRUMDMG    EQU     %00000001               ; UPDATE DAMAGE MASK
00001238  =00000002                506  PLRPMDMG    EQU     %00000010               ; PLOT DAMAGE MASK
00001238  =00000000                507  PLRUBDMG    EQU     0                       ; UPDATE DAMAGE BIT
00001238  =00000001                508  PLRPBDMG    EQU     1                       ; PLOT DAMAGE BIT
00001238                           509  
00001238  =00000003                510  PLRCLIFE    EQU     3                       ; PLAYER CONSTANT LIFE 
00001238                           511  
00001238                           512  ; --- SHOT RELATED CONSTANTS --------------------------------------------------
00001238                           513  
00001238  =00000014                514  SHTWIDTH    EQU     20                      ; SHOT WIDTH (PIXELS)
00001238  =00000003                515  SHTHEIGH    EQU     3                       ; SHOT HEIGHT. ONLY TO DRAW.
00001238  =0000000A                516  SHTSPEED    EQU     10                      ; SHOT SPEED (PIXELS PER INT)
00001238                           517  
00001238                           518  ; --- ASTEROID RELATED CONSTANTS ----------------------------------------------
00001238                           519  
00001238  =0000001E                520  BOMBSIZE    EQU     30                      ; ASTEROID DIAMETER
00001238  =00000000                521  BOMBPENCL   EQU     $00000000               ; ASTEROID PEN COLOR
00001238  =00000000                522  BOMBFILCL   EQU     $00000000               ; ASTEROID FIL COLOR
00001238  =00727272                523  WICKPENCL   EQU     $00727272               ; WICK PEN COLOR
00001238  =00727272                524  WICKFILCL   EQU     $00727272               ; WICK FIL COLOR
00001238  =005A70BD                525  FIREPENCL   EQU     $005A70BD               ; FIRE PEN COLOR
00001238  =005A70BD                526  FIREFILCL   EQU     $005A70BD               ; FIRE FIL COLOR
00001238  =00000001                527  BOMBDMG     EQU     1                       ; ASTEROID DAMAGE TO PLAYER
00001238  =00000005                528  BOMBFRAG    EQU     5                       ; NUMBER OF FRAGMENTS IN EXPLOSION
00001238  =00000005                529  BOMBSCORE   EQU     5                       ; SCORE ASTEROID DESTRUCTION
00001238                           530  
00001238                           531  ; --- EXPLOSION RELATED CONSTANTS ---------------------------------------------
00001238                           532  
00001238  =00000014                533  XPLSIZE     EQU     20                      ; EXPLOSION ITEM DIAMETER (PIXELS)
00001238  =00DDDDDD                534  XPLPENCL    EQU     $00DDDDDD               ; EXPLOSION ITEM PEN COLOR
00001238  =00CCCCCC                535  XPLFILCL    EQU     $00CCCCCC               ; EXPLOSION ITEM FIL COLOR
00001238                           536  
00001238                           537  ; --- INTRO STATE RELATED CONSTANTS -------------------------------------------
00001238                           538  
00001238  =0000001F                539  INTTITX     EQU     31                      ; TITLE X COORDINATE
00001238  =00000005                540  INTTITY     EQU     5                       ; TITLE Y COORDINATE
00001238  =000000FF                541  INTTITC     EQU     $000000FF               ; TITLE COLOR
00001238  =0000001F                542  INTPRSX     EQU     31                      ; PRESS FIRE X COORDINATE
00001238  =0000001A                543  INTPRSY     EQU     26                      ; PRESS FIRE Y COORDINATE
00001238  =00FFFFFF                544  INTPRSC     EQU     $00FFFFFF               ; PRESS FIRE COLOR
00001238                           545  
00001238                           546  ; --- PAUSED STATE RELATED CONSTANTS -------------------------------------------
00001238                           547  
00001238  =00000019                548  PAUSTITX     EQU     25                      ; TITLE X COORDINATE
00001238  =0000000F                549  PAUSTITY     EQU     15                       ; TITLE Y COORDINATE
00001238                           550  
00001238                           551  
00001238                           552  ; --- GAME OVER STATE RELATED CONSTANTS ---------------------------------------
00001238                           553  
00001238  =00000023                554  GOVSTRX     EQU     35                      ; TITLE X COORDINATE
00001238  =0000000F                555  GOVSTRY     EQU     15                      ; TITLE Y COORDINATE
00001238  =00FFFFFF                556  GOVSTRC     EQU     $00FFFFFF               ; TITLE COLOR
00001238                           557  
00001238                           558  ; --- BOMBMAN RELATED CONSTANTS ------------------------------------------------
00001238                           559  
00001238  =00000032                560  BMNWIDTH    EQU     50                      ; BOMBMAN WIDTH  (PIXELS)
00001238  =00000050                561  BMNHEIGH    EQU     80                      ; BOMBMAN HEIGHT (PIXELS)
00001238  =0000000A                562  BMNHANDW    EQU     10                      ; BOMBMAN HAND WIDTH
00001238  =00000005                563  BMNHANDH    EQU     5                       ; BOMBMAN HAND HEIGHT
00001238  =00000032                564  BMNBODYW    EQU     50                      ; BOMBMAN BODY WIDTH
00001238  =00000032                565  BMNBODYH    EQU     50                      ; BOMBMAN BODY HEIGHT
00001238  =00000001                566  BMNARMW     EQU     1                       ; BOMBMAN ARM WIDTH
00001238  =00000028                567  BMNARMH     EQU     40                      ; BOMBMAN ARM HEIGHT
00001238  =0000001E                568  BMNBDYNCKW  EQU     30                      ; BOMBMAN SHIRT NECK WIDTH
00001238  =00000002                569  BMNBDYNCKH  EQU     2                       ; BOMBMAN SHIRT NECK HEIGHT
00001238  =0000000A                570  BMNNECKW    EQU     10                      ; BOMBMAN NECK WIDTH
00001238  =00000002                571  BMNNECKH    EQU     2                       ; BOMBMAN NECK HEIGHT
00001238  =00000014                572  BMNHEADW    EQU     20                      ; BOMBMAN HEAD WIDTH
00001238  =00000014                573  BMNHEADH    EQU     20                      ; BOMBMAN HEAD HEIGHT
00001238  =00000018                574  BMNMASKW    EQU     24                      ; BOMBMAN MASK WIDTH
00001238  =00000005                575  BMNMASKH    EQU     5                       ; BOMBMAN MASK HEIGHT
00001238  =00000005                576  BMNEYEW     EQU     5                       ; BOMBMAN EYE WIDTH
00001238  =00000005                577  BMNEYEH     EQU     5                       ; BOMBMAN EYE HEIGHT
00001238  =00000001                578  BMNPUPILW   EQU     1                       ; BOMBMAN PUPIL WIDTH
00001238  =00000001                579  BMNPUPILH   EQU     1                       ; BOMBMAN PUPIL HEIGHT
00001238  =00000032                580  BMNLINEW    EQU     50                      ; BOMBMAN BLACK LINES WIDTH
00001238  =00000005                581  BMNLINEH    EQU     5                       ; BOMBMAN BLACK LINES HEIGHT
00001238  =00000009                582  BMNSPEED    EQU     9                       ; BOMBMAN SPEED (PIXELS PER INT)
00001238  =00FFFFFF                583  BMNNRMCL    EQU     $00FFFFFF               ; BOMBMAN NORMAL COLOR
00001238  =00DCDCFF                584  BMNSKINCL   EQU     $00DCDCFF               ; BOMNMAN SKIN COLOR
00001238  =00000000                585  BMNLINECL   EQU     $00000000               ; BOMBMAN LINES COLOR
00001238                           586  
00001238                           587  
00001238                           588  
00001238                           589  
00001238                           590  
00001238                           591  
00001238                           592  
00001238                           593  
00001238                           594  
00001238                           595  
00001238                           596  
00001238                           597  
00001238                           598  
00001238                           599  
00001238                           600  -------------------- end include --------------------
00001238                           601              INCLUDE "UTIL.X68"              ; UTILITY MACRO AND SUBROUTINES
00001238                           602  ; =============================================================================
00001238                           603  ; UTILITY MACROS
00001238                           604  ; =============================================================================
00001238                           605  
00001238                           606  ; -----------------------------------------------------------------------------
00001238                           607  UTLSPEN     MACRO
00001238                           608  ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001238                           609  ; INPUT    - \1 COLOR IN FORMAT $00BBGGRR
00001238                           610  ; OUTPUT   - NONE
00001238                           611  ; MODIFIES - D0,D1
00001238                           612  ; -----------------------------------------------------------------------------
00001238                           613              MOVE.B  #80,D0
00001238                           614              MOVE.L  \1,D1
00001238                           615              TRAP    #15
00001238                           616              ENDM
00001238                           617  
00001238                           618  ; -----------------------------------------------------------------------------
00001238                           619  UTLSFIL     MACRO
00001238                           620  ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001238                           621  ; INPUT    - \1 COLOR IN FORMAT $00BBGGRR
00001238                           622  ; OUTPUT   - NONE
00001238                           623  ; MODIFIES - D0,D1
00001238                           624  ; -----------------------------------------------------------------------------
00001238                           625              MOVE.B  #81,D0
00001238                           626              MOVE.L  \1,D1
00001238                           627              TRAP    #15
00001238                           628              ENDM
00001238                           629  
00001238                           630  ; -----------------------------------------------------------------------------
00001238                           631  UTLLOCT     MACRO
00001238                           632  ; WRAPPER TO TEXT POSITIONNING FROM TRAP 15
00001238                           633  ; INPUT    - \1 X, \2 Y
00001238                           634  ; OUTPUT   - NONE
00001238                           635  ; MODIFIES - D0,D1
00001238                           636  ; -----------------------------------------------------------------------------
00001238                           637              MOVE.W  #\1<<8|\2, D1
00001238                           638              MOVE.B  #11,D0
00001238                           639              TRAP    #15
00001238                           640              ENDM
00001238                           641  
00001238                           642  UTLSND     MACRO
00001238                           643  ; WRAPPER FOR PLAYING WAV FILE TRAP 15 TASK
00001238                           644  ; INPUT    - \1 ADDRESS TO STRING WITH NAME OF THE FILE
00001238                           645  ; OUTPUT   - D0.W=0 IF SOUND NOT PLAYED, NON ZERO IF PLAYED
00001238                           646  ; MODIFIES - D0,A1
00001238                           647  ; -----------------------------------------------------------------------------
00001238                           648              LEA     \1, A1             ;PLAY EXPLOSION SOUND
00001238                           649              MOVE.L  #73,D0
00001238                           650              TRAP    #15
00001238                           651              ENDM
00001238                           652  ; =============================================================================
00001238                           653  ; UTILITY SUBROUTINES
00001238                           654  ; =============================================================================
00001238                           655  
00001238                           656  ; -----------------------------------------------------------------------------
00001238                           657  UTLINIT
00001238                           658  ; INITIALIZES UTILITY CODE
00001238                           659  ; INPUT    - NONE
00001238                           660  ; OUTPUT   - NONE
00001238                           661  ; MODIFIES - NONE
00001238                           662  ; -----------------------------------------------------------------------------
00001238  4239 00002BC4            663              CLR.B   (UTLRNDIX)
0000123E  4E75                     664              RTS
00001240                           665  ; -----------------------------------------------------------------------------
00001240                           666  UTLCHCOL
00001240                           667  ; CHECKS COLLISION
00001240                           668  ; INPUT    - D0.W X0 COORDINATE
00001240                           669  ;            D1.W Y0 COORDINATE
00001240                           670  ;            D2.W X1 COORDINATE
00001240                           671  ;            D3.W Y1 COORDINATE
00001240                           672  ;            D4.W WIDTH 0
00001240                           673  ;            D5.W WIDTH 1
00001240                           674  ;            D6.W HEIGHT 0
00001240                           675  ;            D7.W HEIGHT 1
00001240                           676  ; OUTPUT   - D0.B=FF - COLLISION, =0 - NO COLLISION
00001240                           677  ; MODIFIES - NONE
00001240                           678  ; -----------------------------------------------------------------------------
00001240  48A7 0F00                679              MOVEM.W D4-D7,-(A7)
00001244  D840                     680              ADD.W   D0,D4
00001246  B842                     681              CMP.W   D2,D4
00001248  6F00 0022                682              BLE     .NOCOL
0000124C  DA42                     683              ADD.W   D2,D5
0000124E  BA40                     684              CMP.W   D0,D5
00001250  6F00 001A                685              BLE     .NOCOL
00001254  DC41                     686              ADD.W   D1,D6
00001256  BC43                     687              CMP.W   D3,D6
00001258  6F00 0012                688              BLE     .NOCOL
0000125C  DE43                     689              ADD.W   D3,D7
0000125E  BE41                     690              CMP.W   D1,D7
00001260  6F00 000A                691              BLE     .NOCOL
00001264  103C 00FF                692              MOVE.B  #$FF,D0
00001268  6000 0004                693              BRA     .END
0000126C  4200                     694  .NOCOL      CLR.B   D0
0000126E  4C9F 00F0                695  .END        MOVEM.W (A7)+,D4-D7
00001272  4E75                     696              RTS
00001274                           697  
00001274                           698  ; -----------------------------------------------------------------------------
00001274                           699  UTLRAND
00001274                           700  ; PROVIDES A PSEUDO-RANDOM BYTE
00001274                           701  ; INPUT    - NONE
00001274                           702  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
00001274                           703  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001274                           704  ; -----------------------------------------------------------------------------
00001274  2F08                     705              MOVE.L  A0,-(A7)
00001276  41F9 00001292            706              LEA     .RANDVEC,A0
0000127C  4280                     707              CLR.L   D0
0000127E  1039 00002BC4            708              MOVE.B  (UTLRNDIX),D0
00001284  1030 0800                709              MOVE.B  (A0,D0.L),D0
00001288  5239 00002BC4            710              ADDQ.B  #1,(UTLRNDIX)
0000128E  205F                     711              MOVE.L  (A7)+,A0
00001290  4E75                     712              RTS
00001292                           713  
00001292                           714  
00001292= C0 EE 9A 0C F5 24 ...    715  .RANDVEC    DC.B    192, 238, 154, 12 , 245, 36 , 32 , 103
0000129A= 2A A3 51 26 E0 AC ...    716              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
000012A2= 75 51 CA FD 33 EB ...    717              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
000012AA= 60 CC E7 B8 9A EB ...    718              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
000012B2= 1D 76 B5 95 B0 89 ...    719              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
000012BA= 39 15 48 C9 6E CA ...    720              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
000012C2= 43 E7 E2 7C 37 25 ...    721              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
000012CA= E9 94 CE E9 E4 52 ...    722              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
000012D2= 37 6D 9A 84 A2 28 ...    723              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
000012DA= 19 E2 C6 77 80 D4 ...    724              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
000012E2= 0A 5A 32 67 33 C2 ...    725              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
000012EA= 59 80 DC 0E 57 FC ...    726              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
000012F2= 8A AB BC F7 07 4D ...    727              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
000012FA= EF D5 77 6E 1E BB ...    728              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
00001302= D6 E0 2A 8F BD 28 ...    729              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
0000130A= 13 4F 66 EC 0A 64 ...    730              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
00001312= 56 52 9A 16 9B 90 ...    731              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
0000131A= 06 8A A4 F7 01 DA ...    732              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
00001322= F2 E7 77 28 B1 76 ...    733              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
0000132A= A4 42 E3 81 B1 67 ...    734              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
00001332= BF CE FA 16 BF 38 ...    735              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
0000133A= D1 8B 50 0C 5F 49 ...    736              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
00001342= DE 4C 14 A2 40 DC ...    737              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
0000134A= B6 9B 0A 38 5D AB ...    738              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
00001352= E2 1B DD 75 15 82 ...    739              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
0000135A= 8A 26 51 30 9F 47 ...    740              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
00001362= 1E 8A BB 71 C6 6E ...    741              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
0000136A= 9F 47 E5 34 94 27 ...    742              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
00001372= 7D 06 D6 BA 30 0F ...    743              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
0000137A= EC 7F 7E 03 CF 2D ...    744              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
00001382= 94 5B 23 F2 8B CD ...    745              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
0000138A= 74 33 EC B9 0F D5 ...    746              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
00001392                           747  
00001392                           748  
00001392                           749  
00001392                           750  
00001392                           751  -------------------- end include --------------------
00001392                           752              INCLUDE "PLAYER.X68"            ; PLAYER MANAGEMENT
00001392                           753  ; =============================================================================
00001392                           754  ; PLAYER MANAGEMENT
00001392                           755  ; =============================================================================
00001392                           756  
00001392                           757  ; -----------------------------------------------------------------------------
00001392                           758  PLRINIT
00001392                           759  ; INITIALIZES THE PLAYER
00001392                           760  ; INPUT    - NONE
00001392                           761  ; OUTPUT   - NONE
00001392                           762  ; MODIFIES - NONE
00001392                           763  ; -----------------------------------------------------------------------------
00001392  33FC 0140 00002BB2       764              MOVE.W  #SCRWIDTH/2,(PLRPOSX)
0000139A  33FC 01B3 00002BB4       765              MOVE.W  #(SCRHEIGH-PLRHEIGH)-25,(PLRPOSY)
000013A2  33FC 0003 00002BBA       766              MOVE.W  #3,PLRLIFE 
000013AA  4279 00002BB8            767              CLR.W   (PLRSCORE)
000013B0  4E75                     768              RTS
000013B2                           769  
000013B2                           770  ; -----------------------------------------------------------------------------
000013B2                           771  PLRUPD
000013B2                           772  ; UPDATES THE PLAYER MOTION
000013B2                           773  ; INPUT    - NONE (ACCESSES KBDVAL AND KBDEDGE)
000013B2                           774  ; OUTPUT   - NONE (MODIFIES PLAYER DATA)
000013B2                           775  ; MODIFIES - NONE
000013B2                           776  ; -----------------------------------------------------------------------------
000013B2  3F01                     777  .NODMG      MOVE.W  D1,-(A7)
000013B4  1239 00001EDC            778              MOVE.B  (KBDVAL),D1             ; PERFORM MOTION AND CHECK BOUNDS.
000013BA  E219                     779              ROR.B   #1,D1
000013BC  6400 001A                780              BCC     .CHKRT
000013C0  0479 000A 00002BB2       781              SUB.W   #PLRSPEED,(PLRPOSX)
000013C8  4A79 00002BB2            782              TST.W   (PLRPOSX)
000013CE  6C00 0008                783              BGE     .CHKRT
000013D2  4279 00002BB2            784              CLR.W   (PLRPOSX)
000013D8  E419                     785  .CHKRT      ROR.B   #2,D1
000013DA  6400 001E                786              BCC     .NOFIRE
000013DE  0679 000A 00002BB2       787              ADD.W   #PLRSPEED,(PLRPOSX)
000013E6  0C79 0249 00002BB2       788              CMP.W   #SCRWIDTH-PLRWIDTH,(PLRPOSX)
000013EE  6F00 000A                789              BLE     .NOFIRE
000013F2  33FC 0249 00002BB2       790              MOVE.W  #SCRWIDTH-PLRWIDTH,(PLRPOSX)
000013FA  321F                     791  .NOFIRE     MOVE.W  (A7)+,D1
000013FC  4E75                     792              RTS
000013FE                           793  
000013FE                           794  ; -----------------------------------------------------------------------------
000013FE                           795  PLRPLOT
000013FE                           796  ; PLOTS THE PLAYER ITS LIFE AND THE SCORE
000013FE                           797  ; INPUT    - NONE
000013FE                           798  ; OUTPUT   - NONE
000013FE                           799  ; MODIFIES - NONE
000013FE                           800  ; -----------------------------------------------------------------------------
000013FE  48E7 FF00                801              MOVEM.L D0-D7,-(A7)
00001402  223C 00696969            802              MOVE.L  #PLRNRMCL,D1            ; DECIDE COLOR
00001408  08B9 0001 00002BBC       803              BCLR.B  #PLRPBDMG,(PLRDMG)
00001410  6700 0008                804              BEQ     .NODMG
00001414  223C 000000FF            805              MOVE.L  #PLRDMGCL,D1
0000141A  103C 0050                806  .NODMG      MOVE.B  #80,D0
0000141E  4E4F                     807              TRAP    #15
00001420  5200                     808              ADDQ.B  #1,D0
00001422  4E4F                     809              TRAP    #15
00001424                           810              
00001424                           811              ;PLOT PLAYER
00001424  3239 00002BB2            812              MOVE.W  (PLRPOSX),D1
0000142A  3439 00002BB4            813              MOVE.W  (PLRPOSY),D2
00001430  3601                     814              MOVE.W  D1,D3
00001432  3802                     815              MOVE.W  D2,D4
00001434  0643 0037                816              ADD.W   #PLRWIDTH,D3
00001438  0644 0014                817              ADD.W   #PLRHEIGH,D4
0000143C  103C 0057                818              MOVE.B  #87,D0
00001440  4E4F                     819              TRAP    #15
00001442                           820              
00001442                           821m             UTLSPEN #PLRWTRCL
00001442                           822m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001442                           823m ; INPUT    - #PLRWTRCL COLOR IN FORMAT $00BBGGRR
00001442                           824m ; OUTPUT   - NONE
00001442                           825m ; MODIFIES - D0,D1
00001442                           826m ; -----------------------------------------------------------------------------
0000144E                           827m             UTLSFIL #PLRWTRCL
0000144E                           828m ; WRAPPER FOR SET FIL TRAP 15 TASK.
0000144E                           829m ; INPUT    - #PLRWTRCL COLOR IN FORMAT $00BBGGRR
0000144E                           830m ; OUTPUT   - NONE
0000144E                           831m ; MODIFIES - D0,D1
0000144E                           832m ; -----------------------------------------------------------------------------
0000145A                           833              ;PLOT WATER
0000145A  3239 00002BB2            834              MOVE.W  (PLRPOSX),D1
00001460  5A41                     835              ADD.W   #5,D1            
00001462  3439 00002BB4            836              MOVE.W  (PLRPOSY),D2
00001468  3601                     837              MOVE.W  D1,D3
0000146A  0643 0037                838              ADD.W   #PLRWIDTH,D3
0000146E  0443 000A                839              SUB.W   #10,D3
00001472  3802                     840              MOVE.W  D2,D4
00001474  0644 0014                841              ADD.W   #PLRHEIGH,D4
00001478  0444 000F                842              SUB.W   #15,D4
0000147C  103C 0057                843              MOVE.B  #87,D0
00001480  4E4F                     844              TRAP    #15
00001482                           845  
00001482                           846m             UTLSPEN #PLRTXTCL               ; PLOT THE SCORE TEXT
00001482                           847m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001482                           848m ; INPUT    - #PLRTXTCL COLOR IN FORMAT $00BBGGRR
00001482                           849m ; OUTPUT   - NONE
00001482                           850m ; MODIFIES - D0,D1
00001482                           851m ; -----------------------------------------------------------------------------
0000148E                           852m             UTLSFIL #$00000000
0000148E                           853m ; WRAPPER FOR SET FIL TRAP 15 TASK.
0000148E                           854m ; INPUT    - #$00000000 COLOR IN FORMAT $00BBGGRR
0000148E                           855m ; OUTPUT   - NONE
0000148E                           856m ; MODIFIES - D0,D1
0000148E                           857m ; -----------------------------------------------------------------------------
00001496                           858m             UTLLOCT PLRTXTX,PLRTXTY
00001496                           859m ; WRAPPER TO TEXT POSITIONNING FROM TRAP 15
00001496                           860m ; INPUT    - PLRTXTX X, PLRTXTY Y
00001496                           861m ; OUTPUT   - NONE
00001496                           862m ; MODIFIES - D0,D1
00001496                           863m ; -----------------------------------------------------------------------------
000014A0  43F9 0000156A            864              LEA     .SCORESTR,A1
000014A6  4281                     865              CLR.L   D1
000014A8  3239 00002BB8            866              MOVE.W  (PLRSCORE),D1
000014AE  103C 0011                867              MOVE.B  #17,D0
000014B2  4E4F                     868              TRAP    #15
000014B4  3A39 00002BBA            869              MOVE.W PLRLIFE,D5
000014BA  5345                     870              SUBQ.W #1,D5
000014BC                           871              
000014BC  3C3C 0208                872              MOVE.W  #520,D6
000014C0  3E3C 0212                873              MOVE.W  #530,D7
000014C4                           874              
000014C4                           875m .HEART      UTLSPEN #$000000FF              ;PLOT THE HEARTS
000014C4                           876m ; WRAPPER FOR SET PEN TRAP 15 TASK.
000014C4                           877m ; INPUT    - #$000000FF COLOR IN FORMAT $00BBGGRR
000014C4                           878m ; OUTPUT   - NONE
000014C4                           879m ; MODIFIES - D0,D1
000014C4                           880m ; -----------------------------------------------------------------------------
000014D0                           881m             UTLSFIL #$000000FF
000014D0                           882m ; WRAPPER FOR SET FIL TRAP 15 TASK.
000014D0                           883m ; INPUT    - #$000000FF COLOR IN FORMAT $00BBGGRR
000014D0                           884m ; OUTPUT   - NONE
000014D0                           885m ; MODIFIES - D0,D1
000014D0                           886m ; -----------------------------------------------------------------------------
000014DC                           887              
000014DC                           888              ; FIRST LINE OF SQUARE
000014DC  2207                     889              MOVE.L  D7,D1
000014DE  740F                     890              MOVE.L  #15,D2
000014E0  0687 0000000A            891              ADD.L   #10,D7
000014E6  2607                     892              MOVE.L  D7,D3
000014E8  0487 0000000A            893              SUB.L   #10,D7
000014EE  7819                     894              MOVE.L  #25,D4
000014F0  103C 0054                895              MOVE.B  #84,D0
000014F4  4E4F                     896              TRAP    #15
000014F6                           897              
000014F6                           898              ; SECOND LINE OF SQUARE
000014F6  2207                     899              MOVE.L  D7,D1
000014F8  7423                     900              MOVE.L  #35,D2
000014FA  103C 0055                901              MOVE.B  #85,D0
000014FE  4E4F                     902              TRAP    #15
00001500                           903              
00001500                           904              ;THIRD LINE OF SQUARE
00001500  2206                     905              MOVE.L  D6,D1
00001502  7419                     906              MOVE.L  #25,D2
00001504  103C 0055                907              MOVE.B  #85,D0
00001508  4E4F                     908              TRAP    #15
0000150A                           909              
0000150A                           910              ; FOURTH LINE OF SQUARE
0000150A  2207                     911              MOVE.L  D7,D1
0000150C  740F                     912              MOVE.L  #15,D2
0000150E  103C 0055                913              MOVE.B  #85,D0
00001512  4E4F                     914              TRAP    #15
00001514                           915              
00001514                           916              ; LEFT CIRCLE
00001514  0487 0000000C            917              SUB.L  #12,D7
0000151A  2207                     918              MOVE.L  D7,D1
0000151C  740D                     919              MOVE.L  #13,D2
0000151E  0687 0000000E            920              ADD.L  #14,D7
00001524  2607                     921              MOVE.L  D7,D3
00001526  781B                     922              MOVE.L  #27,D4
00001528  103C 0058                923              MOVE.B  #88,D0
0000152C  4E4F                     924              TRAP    #15
0000152E                           925              
0000152E                           926              ; RIGHT CIRCLE
0000152E  5987                     927              SUB.L  #4,D7
00001530  2207                     928              MOVE.L  D7,D1
00001532  740D                     929              MOVE.L  #13,D2
00001534  0687 0000000E            930              ADD.L  #14,D7
0000153A  2607                     931              MOVE.L  D7,D3
0000153C  781B                     932              MOVE.L  #27,D4
0000153E  103C 0058                933              MOVE.B  #88,D0
00001542  4E4F                     934              TRAP    #15
00001544                           935              
00001544                           936              ; RESTORE D7 VALUE
00001544  0487 0000000C            937              SUB.L   #12,D7
0000154A                           938              
0000154A                           939              ; FILL HEART
0000154A  2207                     940              MOVE.L  D7,D1
0000154C  741E                     941              MOVE.L  #30,D2
0000154E  103C 0059                942              MOVE.B  #89,D0
00001552  4E4F                     943              TRAP    #15
00001554                           944  
00001554  0686 00000028            945              ADD.L   #40,D6
0000155A  0687 00000028            946              ADD.L   #40,D7
00001560  51CD FF62                947              DBRA D5,.HEART
00001564  4CDF 00FF                948              MOVEM.L (A7)+,D0-D7
00001568  4E75                     949              RTS
0000156A= 53 43 4F 52 45 3A ...    950  .SCORESTR   DC.B    'SCORE: ',0
00001572                           951  
00001572                           952  
00001572                           953  
00001572                           954  
00001572                           955  
00001572                           956  
00001572                           957  
00001572                           958  
00001572                           959  
00001572                           960  
00001572                           961  
00001572                           962  
00001572                           963  
00001572                           964  
00001572                           965  
00001572                           966  
00001572                           967  
00001572                           968  
00001572                           969  
00001572                           970  
00001572                           971  
00001572                           972  
00001572                           973  
00001572                           974  
00001572                           975  -------------------- end include --------------------
00001572                           976              INCLUDE "BOMBMAN.X68"           ; BOMBMAN MANEGEMENT
00001572                           977  ; =============================================================================
00001572                           978  ; BOMBMAN MANAGEMENT
00001572                           979  ; =============================================================================
00001572                           980  
00001572                           981  ; -----------------------------------------------------------------------------
00001572                           982  BMNINIT
00001572                           983  ; INITIALIZES THE BOMBMAN
00001572                           984  ; INPUT    - NONE
00001572                           985  ; OUTPUT   - NONE
00001572                           986  ; MODIFIES - NONE
00001572                           987  ; -----------------------------------------------------------------------------
00001572  33FC 0140 00002BBE       988              MOVE.W  #SCRWIDTH/2,(BMNPOSX)
0000157A  33FC 002D 00002BC0       989              MOVE.W  #(BMNHEIGH)-35,(BMNPOSY)
00001582  33FC 0081 00002BC2       990              MOVE.W  #129,(BMNDIR)
0000158A  4E75                     991              RTS
0000158C                           992  
0000158C                           993  ; -----------------------------------------------------------------------------
0000158C                           994  BMNUPD
0000158C                           995  ; UPDATES THE BOMBMAN MOTION
0000158C                           996  ; INPUT    - NONE 
0000158C                           997  ; OUTPUT   - NONE (MODIFIES BOMBMAN DATA)
0000158C                           998  ; MODIFIES - NONE
0000158C                           999  ; -----------------------------------------------------------------------------
0000158C  1239 00001EDF           1000              MOVE.B  (SCRCYCCT),D1
00001592  C27C 0020               1001              AND     #$20,D1                 ; EVERY 16 CYCLES
00001596  6600 0024               1002              BNE     .ENDCICLE               ; NEW DIRECTION
0000159A  4EB8 1274               1003              JSR     UTLRAND
0000159E  3239 00002BBE           1004              MOVE.W  (BMNPOSX),D1            ;BMNDIR=(BMNPOSX*128)/((SCRWIDTH)/2)
000015A4  C2FC 0080               1005              MULU.W  #128,D1
000015A8  82FC 0140               1006              DIVU.W  #320,D1
000015AC  3401                    1007              MOVE.W  D1,D2
000015AE  4842                    1008              SWAP    D2
000015B0  C4FC 0140               1009              MULU.W  #320,D2
000015B4  D242                    1010              ADD.W   D2,D1
000015B6  33C1 00002BC2           1011              MOVE.W  D1,(BMNDIR)             
000015BC                          1012  .ENDCICLE                                    
000015BC  B079 00002BC2           1013              CMP.W   (BMNDIR),D0
000015C2  6C00 0020               1014              BGE     .CHKRT
000015C6  0479 0009 00002BBE      1015              SUB.W   #BMNSPEED,(BMNPOSX)
000015CE  4A79 00002BBE           1016              TST.W   (BMNPOSX)
000015D4  6C00 002A               1017              BGE     .END
000015D8  4279 00002BBE           1018              CLR.W   (BMNPOSX)
000015DE  4EF9 00001600           1019              JMP     .END
000015E4  0679 0009 00002BBE      1020  .CHKRT      ADD.W   #BMNSPEED,(BMNPOSX)
000015EC  0C79 024E 00002BBE      1021              CMP     #SCRWIDTH-BMNWIDTH,(BMNPOSX)
000015F4  6F00 000A               1022              BLE     .END
000015F8  33FC 024E 00002BBE      1023              MOVE.W  #SCRWIDTH-BMNWIDTH,(BMNPOSX)
00001600                          1024  .END        
00001600  4E75                    1025              RTS
00001602                          1026  
00001602                          1027  ; -----------------------------------------------------------------------------
00001602                          1028  BMNPLOT
00001602                          1029  ; PLOTS THE BOMBMAN 
00001602                          1030  ; INPUT    - NONE
00001602                          1031  ; OUTPUT   - NONE
00001602                          1032  ; MODIFIES - NONE
00001602                          1033  ; -----------------------------------------------------------------------------
00001602  48E7 F800               1034              MOVEM.L D0-D4,-(A7)      
00001606                          1035              
00001606                          1036              ; PLOT THE BOMBMAN
00001606                          1037m             UTLSPEN #BMNSKINCL
00001606                          1038m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001606                          1039m ; INPUT    - #BMNSKINCL COLOR IN FORMAT $00BBGGRR
00001606                          1040m ; OUTPUT   - NONE
00001606                          1041m ; MODIFIES - D0,D1
00001606                          1042m ; -----------------------------------------------------------------------------
00001612                          1043m             UTLSFIL #BMNSKINCL
00001612                          1044m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001612                          1045m ; INPUT    - #BMNSKINCL COLOR IN FORMAT $00BBGGRR
00001612                          1046m ; OUTPUT   - NONE
00001612                          1047m ; MODIFIES - D0,D1
00001612                          1048m ; -----------------------------------------------------------------------------
0000161E                          1049              
0000161E                          1050              ; PLOT LEFT HAND
0000161E  3239 00002BBE           1051              MOVE.W  (BMNPOSX),D1
00001624  5A41                    1052              ADD.W   #5,D1
00001626  3439 00002BC0           1053              MOVE.W  (BMNPOSY),D2
0000162C  0642 004B               1054              ADD.W   #75,D2
00001630  3601                    1055              MOVE.W  D1,D3
00001632  3802                    1056              MOVE.W  D2,D4
00001634  0643 000A               1057              ADD.W   #BMNHANDW,D3
00001638  5A44                    1058              ADD.W   #BMNHANDH,D4
0000163A  103C 0057               1059              MOVE.B  #87,D0
0000163E  4E4F                    1060              TRAP    #15
00001640                          1061              
00001640                          1062              ; PLOT RIGTH HAND
00001640  3239 00002BBE           1063              MOVE.W  (BMNPOSX),D1
00001646  0641 0023               1064              ADD.W   #35,D1
0000164A  3439 00002BC0           1065              MOVE.W  (BMNPOSY),D2
00001650  0642 004B               1066              ADD.W   #75,D2
00001654  3601                    1067              MOVE.W  D1,D3
00001656  3802                    1068              MOVE.W  D2,D4
00001658  0643 000A               1069              ADD.W   #BMNHANDW,D3
0000165C  5A44                    1070              ADD.W   #BMNHANDH,D4
0000165E  103C 0057               1071              MOVE.B  #87,D0
00001662  4E4F                    1072              TRAP    #15
00001664                          1073              
00001664                          1074              ; PLOT NECK
00001664  3239 00002BBE           1075              MOVE.W  (BMNPOSX),D1
0000166A  0641 0014               1076              ADD.W   #20,D1
0000166E  3439 00002BC0           1077              MOVE.W  (BMNPOSY),D2
00001674  0642 0015               1078              ADD.W   #21,D2
00001678  3601                    1079              MOVE.W  D1,D3
0000167A  3802                    1080              MOVE.W  D2,D4
0000167C  0643 000A               1081              ADD.W   #BMNNECKW,D3
00001680  5444                    1082              ADD.W   #BMNNECKH,D4
00001682  103C 0057               1083              MOVE.B  #87,D0
00001686  4E4F                    1084              TRAP    #15
00001688                          1085              
00001688                          1086              ; PLOT HEAD
00001688  3239 00002BBE           1087              MOVE.W  (BMNPOSX),D1
0000168E  0641 000F               1088              ADD.W   #15,D1
00001692  3439 00002BC0           1089              MOVE.W  (BMNPOSY),D2
00001698  3601                    1090              MOVE.W  D1,D3
0000169A  3802                    1091              MOVE.W  D2,D4
0000169C  0643 0014               1092              ADD.W   #BMNHEADW,D3
000016A0  0644 0014               1093              ADD.W   #BMNHEADH,D4
000016A4  103C 0057               1094              MOVE.B  #87,D0
000016A8  4E4F                    1095              TRAP    #15
000016AA                          1096              
000016AA                          1097m             UTLSPEN #BMNNRMCL
000016AA                          1098m ; WRAPPER FOR SET PEN TRAP 15 TASK.
000016AA                          1099m ; INPUT    - #BMNNRMCL COLOR IN FORMAT $00BBGGRR
000016AA                          1100m ; OUTPUT   - NONE
000016AA                          1101m ; MODIFIES - D0,D1
000016AA                          1102m ; -----------------------------------------------------------------------------
000016B6                          1103m             UTLSFIL #BMNNRMCL
000016B6                          1104m ; WRAPPER FOR SET FIL TRAP 15 TASK.
000016B6                          1105m ; INPUT    - #BMNNRMCL COLOR IN FORMAT $00BBGGRR
000016B6                          1106m ; OUTPUT   - NONE
000016B6                          1107m ; MODIFIES - D0,D1
000016B6                          1108m ; -----------------------------------------------------------------------------
000016C2                          1109              ; PLOT BODY
000016C2  3239 00002BBE           1110              MOVE.W  (BMNPOSX),D1
000016C8  3439 00002BC0           1111              MOVE.W  (BMNPOSY),D2
000016CE  0642 0019               1112              ADD.W   #25,D2
000016D2  3601                    1113              MOVE.W  D1,D3
000016D4  3802                    1114              MOVE.W  D2,D4
000016D6  0643 0032               1115              ADD.W   #BMNBODYW,D3
000016DA  0644 0032               1116              ADD.W   #BMNBODYH,D4
000016DE  103C 0057               1117              MOVE.B  #87,D0
000016E2  4E4F                    1118              TRAP    #15
000016E4                          1119              
000016E4                          1120              ; PLOT BODY NECK
000016E4  3239 00002BBE           1121              MOVE.W  (BMNPOSX),D1
000016EA  0641 000A               1122              ADD.W   #10,D1
000016EE  3439 00002BC0           1123              MOVE.W  (BMNPOSY),D2
000016F4  0642 0017               1124              ADD.W   #23,D2
000016F8  3601                    1125              MOVE.W  D1,D3
000016FA  3802                    1126              MOVE.W  D2,D4
000016FC  0643 001E               1127              ADD.W   #BMNBDYNCKW,D3
00001700  5444                    1128              ADD.W   #BMNBDYNCKH,D4
00001702  103C 0057               1129              MOVE.B  #87,D0
00001706  4E4F                    1130              TRAP    #15
00001708                          1131              
00001708                          1132  
00001708                          1133m             UTLSPEN #BMNLINECL
00001708                          1134m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001708                          1135m ; INPUT    - #BMNLINECL COLOR IN FORMAT $00BBGGRR
00001708                          1136m ; OUTPUT   - NONE
00001708                          1137m ; MODIFIES - D0,D1
00001708                          1138m ; -----------------------------------------------------------------------------
00001710                          1139m             UTLSFIL #BMNLINECL
00001710                          1140m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001710                          1141m ; INPUT    - #BMNLINECL COLOR IN FORMAT $00BBGGRR
00001710                          1142m ; OUTPUT   - NONE
00001710                          1143m ; MODIFIES - D0,D1
00001710                          1144m ; -----------------------------------------------------------------------------
00001718                          1145              ; PLOT LINES
00001718  3239 00002BBE           1146              MOVE.W  (BMNPOSX),D1
0000171E  3439 00002BC0           1147              MOVE.W  (BMNPOSY),D2
00001724  0642 0019               1148              ADD.W   #25,D2
00001728  3601                    1149              MOVE.W  D1,D3
0000172A  3802                    1150              MOVE.W  D2,D4
0000172C  0643 0032               1151              ADD.W   #BMNLINEW,D3
00001730  5A44                    1152              ADD.W   #BMNLINEH,D4
00001732  103C 0057               1153              MOVE.B  #87,D0
00001736  4E4F                    1154              TRAP    #15
00001738                          1155              
00001738  3239 00002BBE           1156              MOVE.W  (BMNPOSX),D1
0000173E  3439 00002BC0           1157              MOVE.W  (BMNPOSY),D2
00001744  0642 0028               1158              ADD.W   #40,D2
00001748  3601                    1159              MOVE.W  D1,D3
0000174A  3802                    1160              MOVE.W  D2,D4
0000174C  0643 0032               1161              ADD.W   #BMNLINEW,D3
00001750  5A44                    1162              ADD.W   #BMNLINEH,D4
00001752  103C 0057               1163              MOVE.B  #87,D0
00001756  4E4F                    1164              TRAP    #15
00001758                          1165              
00001758  3239 00002BBE           1166              MOVE.W  (BMNPOSX),D1
0000175E  3439 00002BC0           1167              MOVE.W  (BMNPOSY),D2
00001764  0642 0037               1168              ADD.W   #55,D2
00001768  3601                    1169              MOVE.W  D1,D3
0000176A  3802                    1170              MOVE.W  D2,D4
0000176C  0643 0032               1171              ADD.W   #BMNLINEW,D3
00001770  5A44                    1172              ADD.W   #BMNLINEH,D4
00001772  103C 0057               1173              MOVE.B  #87,D0
00001776  4E4F                    1174              TRAP    #15
00001778                          1175              
00001778  3239 00002BBE           1176              MOVE.W  (BMNPOSX),D1
0000177E  3439 00002BC0           1177              MOVE.W  (BMNPOSY),D2
00001784  0642 0046               1178              ADD.W   #70,D2
00001788  3601                    1179              MOVE.W  D1,D3
0000178A  3802                    1180              MOVE.W  D2,D4
0000178C  0643 0032               1181              ADD.W   #BMNLINEW,D3
00001790  5A44                    1182              ADD.W   #BMNLINEH,D4
00001792  103C 0057               1183              MOVE.B  #87,D0
00001796  4E4F                    1184              TRAP    #15
00001798                          1185              
00001798                          1186              ; PLOT ARMS
00001798  3239 00002BBE           1187              MOVE.W  (BMNPOSX),D1
0000179E  0641 0009               1188              ADD.W   #9,D1
000017A2  3439 00002BC0           1189              MOVE.W  (BMNPOSY),D2
000017A8  0642 0023               1190              ADD.W   #35,D2
000017AC  3601                    1191              MOVE.W  D1,D3
000017AE  3802                    1192              MOVE.W  D2,D4
000017B0  5243                    1193              ADD.W   #BMNARMW,D3
000017B2  0644 0028               1194              ADD.W   #BMNARMH,D4
000017B6  103C 0057               1195              MOVE.B  #87,D0
000017BA  4E4F                    1196              TRAP    #15
000017BC                          1197              
000017BC  3239 00002BBE           1198              MOVE.W  (BMNPOSX),D1
000017C2  0641 0028               1199              ADD.W   #40,D1
000017C6  3439 00002BC0           1200              MOVE.W  (BMNPOSY),D2
000017CC  0642 0023               1201              ADD.W   #35,D2
000017D0  3601                    1202              MOVE.W  D1,D3
000017D2  3802                    1203              MOVE.W  D2,D4
000017D4  5243                    1204              ADD.W   #BMNARMW,D3
000017D6  0644 0028               1205              ADD.W   #BMNARMH,D4
000017DA  103C 0057               1206              MOVE.B  #87,D0
000017DE  4E4F                    1207              TRAP    #15
000017E0                          1208              
000017E0                          1209              ; PLOT MASK
000017E0  3239 00002BBE           1210              MOVE.W  (BMNPOSX),D1
000017E6  0641 000D               1211              ADD.W   #13,D1
000017EA  3439 00002BC0           1212              MOVE.W  (BMNPOSY),D2
000017F0  5A42                    1213              ADD.W   #5,D2
000017F2  3601                    1214              MOVE.W  D1,D3
000017F4  3802                    1215              MOVE.W  D2,D4
000017F6  0643 0018               1216              ADD.W   #BMNMASKW,D3
000017FA  5A44                    1217              ADD.W   #BMNMASKH,D4
000017FC  103C 0057               1218              MOVE.B  #87,D0
00001800  4E4F                    1219              TRAP    #15
00001802                          1220              
00001802                          1221m             UTLSPEN #BMNNRMCL
00001802                          1222m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001802                          1223m ; INPUT    - #BMNNRMCL COLOR IN FORMAT $00BBGGRR
00001802                          1224m ; OUTPUT   - NONE
00001802                          1225m ; MODIFIES - D0,D1
00001802                          1226m ; -----------------------------------------------------------------------------
0000180E                          1227m             UTLSFIL #BMNNRMCL
0000180E                          1228m ; WRAPPER FOR SET FIL TRAP 15 TASK.
0000180E                          1229m ; INPUT    - #BMNNRMCL COLOR IN FORMAT $00BBGGRR
0000180E                          1230m ; OUTPUT   - NONE
0000180E                          1231m ; MODIFIES - D0,D1
0000180E                          1232m ; -----------------------------------------------------------------------------
0000181A                          1233              ; PLOT EYES
0000181A                          1234              ; LEFT EYE
0000181A  3239 00002BBE           1235              MOVE.W  (BMNPOSX),D1
00001820  0641 0012               1236              ADD.W   #18,D1
00001824  3439 00002BC0           1237              MOVE.W  (BMNPOSY),D2
0000182A  5A42                    1238              ADD.W   #5,D2
0000182C  3601                    1239              MOVE.W  D1,D3
0000182E  3802                    1240              MOVE.W  D2,D4
00001830  5A43                    1241              ADD.W   #BMNEYEW,D3
00001832  5A44                    1242              ADD.W   #BMNEYEH,D4
00001834  103C 0057               1243              MOVE.B  #87,D0
00001838  4E4F                    1244              TRAP    #15
0000183A                          1245              
0000183A                          1246              ; RIGTH EYE
0000183A  3239 00002BBE           1247              MOVE.W  (BMNPOSX),D1
00001840  0641 001B               1248              ADD.W   #27,D1
00001844  3439 00002BC0           1249              MOVE.W  (BMNPOSY),D2
0000184A  5A42                    1250              ADD.W   #5,D2
0000184C  3601                    1251              MOVE.W  D1,D3
0000184E  3802                    1252              MOVE.W  D2,D4
00001850  5A43                    1253              ADD.W   #BMNEYEW,D3
00001852  5A44                    1254              ADD.W   #BMNEYEH,D4
00001854  103C 0057               1255              MOVE.B  #87,D0
00001858  4E4F                    1256              TRAP    #15
0000185A                          1257  
0000185A  4CDF 001F               1258              MOVEM.L (A7)+,D0-D4
0000185E  4E75                    1259              RTS
00001860                          1260  
00001860                          1261  
00001860                          1262  
00001860                          1263  
00001860                          1264  
00001860                          1265  
00001860                          1266  -------------------- end include --------------------
00001860                          1267              INCLUDE "AGENTLST.X68"          ; AGENT LIST MANAGEMENT
00001860                          1268  ; =============================================================================
00001860                          1269  ; AGENT MANAGEMENT
00001860                          1270  ; EACH AGENT HAS A DATA BLOCK FROM DMM AS FOLLOWS:
00001860                          1271  ; +0 - LONG : UPDATE SUBROUTINE POINTER
00001860                          1272  ; +4 - LONG : PLOT SUBROUTINE POINTER
00001860                          1273  ; +8:END    : DATA (AGENT SPECIFIC)
00001860                          1274  ; =============================================================================
00001860                          1275  
00001860                          1276  ; -----------------------------------------------------------------------------
00001860                          1277  AGLADD
00001860                          1278  ; CREATES A NEW AGENT
00001860                          1279  ; INPUT    - A1 - POINTER TO AGENT INIT FUNCTION
00001860                          1280  ;            A2 - POINTER TO AGENT UPDATE FUNCTION
00001860                          1281  ;            A3 - POINTER TO AGENT PLOT FUNCTION
00001860                          1282  ;            D0 - AGENT TYPE (USED AS OWNED BY DMM)
00001860                          1283  ;            D1 - AGENT INITIALIZATION PARAMETER 1
00001860                          1284  ;            D2 - AGENT INITIALIZATION PARAMETER 2
00001860                          1285  ;            D3 - AGENT INITIALIZATION PARAMETER 3
00001860                          1286  ; OUTPUT   - NONE
00001860                          1287  ; MODIFIES - NONE
00001860                          1288  ; -----------------------------------------------------------------------------
00001860  2F08                    1289              MOVE.L  A0,-(A7)
00001862  4EB8 1208               1290              JSR     DMMALLOC
00001866  B1FC 00000000           1291              CMP.L   #0,A0
0000186C  6700 0008               1292              BEQ     .END
00001870  20CA                    1293              MOVE.L  A2,(A0)+
00001872  20CB                    1294              MOVE.L  A3,(A0)+
00001874  4E91                    1295              JSR     (A1)
00001876  205F                    1296  .END        MOVE.L  (A7)+,A0
00001878  4E75                    1297              RTS
0000187A                          1298  
0000187A                          1299  ; -----------------------------------------------------------------------------
0000187A                          1300  AGLUPD
0000187A                          1301  ; UPDATES THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
0000187A                          1302  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
0000187A                          1303  ; INPUT    - NONE
0000187A                          1304  ; OUTPUT   - NONE
0000187A                          1305  ; MODIFIES - NONE
0000187A                          1306  ; -----------------------------------------------------------------------------
0000187A  48E7 00C0               1307              MOVEM.L A0-A1,-(A7)
0000187E  4EB8 1198               1308              JSR     DMMFIRST
00001882  B1FC 00000000           1309  .LOOP       CMP.L   #0,A0
00001888  6700 000E               1310              BEQ     .END
0000188C  2250                    1311              MOVE.L  (A0),A1
0000188E  5088                    1312              ADD.L   #8,A0
00001890  4E91                    1313              JSR     (A1)
00001892  4EB8 11BA               1314              JSR     DMMNEXT
00001896  60EA                    1315              BRA     .LOOP
00001898  4CDF 0300               1316  .END        MOVEM.L (A7)+,A0-A1
0000189C  4E75                    1317              RTS
0000189E                          1318  
0000189E                          1319  ; -----------------------------------------------------------------------------
0000189E                          1320  AGLPLOT
0000189E                          1321  ; PLOTS THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
0000189E                          1322  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
0000189E                          1323  ; INPUT    - NONE
0000189E                          1324  ; OUTPUT   - NONE
0000189E                          1325  ; MODIFIES - NONE
0000189E                          1326  ; -----------------------------------------------------------------------------
0000189E  48E7 00C0               1327              MOVEM.L A0-A1,-(A7)
000018A2  4EB8 1198               1328              JSR     DMMFIRST
000018A6  B1FC 00000000           1329  .LOOP       CMP.L   #0,A0
000018AC  6700 0010               1330              BEQ     .END
000018B0  2268 0004               1331              MOVE.L  4(A0),A1
000018B4  5088                    1332              ADD.L   #8,A0
000018B6  4E91                    1333              JSR     (A1)
000018B8  4EB8 11BA               1334              JSR     DMMNEXT
000018BC  60E8                    1335              BRA     .LOOP
000018BE  4CDF 0300               1336  .END        MOVEM.L (A7)+,A0-A1
000018C2  4E75                    1337              RTS
000018C4                          1338  
000018C4                          1339  ; -----------------------------------------------------------------------------
000018C4  =00001222               1340  AGLKILL     EQU     DMMFREE
000018C4                          1341  ; KILLS THE AGENT BY RELEASING ITS MEMORY
000018C4                          1342  ; INPUT    - A0 POINTER WITHIN THE AGENT MEMORY
000018C4                          1343  ; OUTPUT   - NONE
000018C4                          1344  ; MODIFIES - NONE
000018C4                          1345  ; NOTE     - IT IS JUST A WRAPPER FOR DMMFREE
000018C4                          1346  ; -----------------------------------------------------------------------------
000018C4                          1347  
000018C4                          1348  
000018C4                          1349  -------------------- end include --------------------
000018C4                          1350              INCLUDE "BOMB.X68"              ; BOMB AGENT MANAGEMENT
000018C4                          1351  ; =============================================================================
000018C4                          1352  ; BOMB MANAGEMENT. IT IS AN AGENT.
000018C4                          1353  ; LOCAL MEMORY IS:
000018C4                          1354  ; +0 WORD X COORDINATE
000018C4                          1355  ; +2 WORD Y COORDINATE
000018C4                          1356  ; +4 WORD X SPEED
000018C4                          1357  ; +6 WORD Y SPEED
000018C4                          1358  ; =============================================================================
000018C4                          1359  
000018C4                          1360  ; -----------------------------------------------------------------------------
000018C4                          1361  BOMBINIT
000018C4                          1362  ; INITALIZES A BOMB 
000018C4                          1363  ; INPUT    - A0 POINTER TO THE LOCAL MEMORY
000018C4                          1364  ; OUTPUT   - NONE
000018C4                          1365  ; MODIFIES - NONE
000018C4                          1366  ; NOTE     - ASSUMES SCRHEIGH IS GREATER THAN 255
000018C4                          1367  ; -----------------------------------------------------------------------------
000018C4  48A7 8000               1368              MOVEM.W  D0,-(A7)
000018C8  30B9 00002BBE           1369              MOVE.W  (BMNPOSX),(A0)         ; X POSITION 
000018CE  3039 00002BC0           1370              MOVE.W  (BMNPOSY),D0   
000018D4  0640 001E               1371              ADD.W    #BOMBSIZE,D0                 
000018D8  3140 0002               1372              MOVE.W   D0,2(A0)              ; Y POSITION           
000018DC  317C 0000 0004          1373              MOVE.W   #0,4(A0)              ; X SPEED 
000018E2  317C 0007 0006          1374              MOVE.W   #7,6(A0)              ; Y SPEED 
000018E8  4C9F 0001               1375              MOVEM.W  (A7)+,D0
000018EC  4E75                    1376              RTS
000018EE                          1377  ; -----------------------------------------------------------------------------
000018EE                          1378  BOMBUPD
000018EE                          1379  ; UPDATES A BOMB 
000018EE                          1380  ; INPUT    - A0 POINTER TO THE LOCAL MEMORY
000018EE                          1381  ; OUTPUT   - NONE
000018EE                          1382  ; MODIFIES - NONE
000018EE                          1383  ; -----------------------------------------------------------------------------
000018EE  48A7 C000               1384              MOVEM.W  D0-D1,-(A7)
000018F2  3028 0004               1385              MOVE.W  4(A0),D0                ; UPDATE COORDINATES
000018F6  9150                    1386              SUB.W   D0,(A0)
000018F8  3028 0006               1387              MOVE.W  6(A0),D0
000018FC  D168 0002               1388              ADD.W   D0,2(A0)
00001900  3010                    1389  .COLPLAY    MOVE.W  (A0),D0
00001902  3228 0002               1390              MOVE.W  2(A0),D1
00001906  383C 001E               1391              MOVE.W  #BOMBSIZE,D4
0000190A  3C04                    1392              MOVE.W  D4,D6
0000190C  3439 00002BB2           1393              MOVE.W  (PLRPOSX),D2
00001912  3639 00002BB4           1394              MOVE.W  (PLRPOSY),D3
00001918  3A3C 0037               1395              MOVE.W  #PLRWIDTH,D5
0000191C  3E3C 0014               1396              MOVE.W  #PLRHEIGH,D7
00001920  4EB8 1240               1397              JSR     UTLCHCOL
00001924  4A00                    1398              TST.B   D0
00001926  6700 0022               1399              BEQ     .DMG
0000192A  4EB8 1222               1400              JSR     AGLKILL  
0000192E                          1401m             UTLSND .CATCH
0000192E                          1402m ; WRAPPER FOR PLAYING WAV FILE TRAP 15 TASK
0000192E                          1403m ; INPUT    - .CATCH ADDRESS TO STRING WITH NAME OF THE FILE
0000192E                          1404m ; OUTPUT   - D0.W=0 IF SOUND NOT PLAYED, NON ZERO IF PLAYED
0000192E                          1405m ; MODIFIES - D0,A1
0000192E                          1406m ; -----------------------------------------------------------------------------
00001938  5A79 00002BB8           1407              ADD.W   #BOMBSCORE,(PLRSCORE)  
0000193E  4C9F 0003               1408  .END        MOVEM.W  (A7)+,D0-D1
00001942  4E75                    1409              RTS
00001944  4EB8 1222               1410  .KILL       JSR     AGLKILL
00001948  60B6                    1411              BRA     .COLPLAY
0000194A  3028 0002               1412  .DMG        MOVE.W  2(A0),D0
0000194E  3239 00002BB4           1413              MOVE.W  PLRPOSY,D1
00001954  0641 0014               1414              ADD.W  #PLRHEIGH,D1
00001958  B041                    1415              CMP     D1,D0
0000195A  6BE2                    1416              BMI     .END
0000195C  5379 00002BBA           1417              SUB.W   #BOMBDMG,PLRLIFE
00001962                          1418m             UTLSND .EXPLODE    
00001962                          1419m ; WRAPPER FOR PLAYING WAV FILE TRAP 15 TASK
00001962                          1420m ; INPUT    - .EXPLODE ADDRESS TO STRING WITH NAME OF THE FILE
00001962                          1421m ; OUTPUT   - D0.W=0 IF SOUND NOT PLAYED, NON ZERO IF PLAYED
00001962                          1422m ; MODIFIES - D0,A1
00001962                          1423m ; -----------------------------------------------------------------------------
0000196C  4EB8 1222               1424              JSR     AGLKILL            
00001970  60CC                    1425              BRA   .END  
00001972= 534F554E 442F424F ...   1426  .EXPLODE    DC.L 'SOUND/BOMBEXPLODES.WAV',0            
0000198E= 534F554E 442F5049 ...   1427  .CATCH      DC.L 'SOUND/PING.WAV',0
000019A2                          1428  ; -----------------------------------------------------------------------------
000019A2                          1429  BOMBPLOT
000019A2                          1430  ; PLOTS A BOMB 
000019A2                          1431  ; INPUT    - A0 POINTER TO THE LOCAL MEMORY
000019A2                          1432  ; OUTPUT   - NONE
000019A2                          1433  ; MODIFIES - NONE
000019A2                          1434  ; -----------------------------------------------------------------------------
000019A2                          1435m  UTLSPEN #BOMBPENCL
000019A2                          1436m ; WRAPPER FOR SET PEN TRAP 15 TASK.
000019A2                          1437m ; INPUT    - #BOMBPENCL COLOR IN FORMAT $00BBGGRR
000019A2                          1438m ; OUTPUT   - NONE
000019A2                          1439m ; MODIFIES - D0,D1
000019A2                          1440m ; -----------------------------------------------------------------------------
000019AA                          1441m             UTLSFIL #BOMBFILCL
000019AA                          1442m ; WRAPPER FOR SET FIL TRAP 15 TASK.
000019AA                          1443m ; INPUT    - #BOMBFILCL COLOR IN FORMAT $00BBGGRR
000019AA                          1444m ; OUTPUT   - NONE
000019AA                          1445m ; MODIFIES - D0,D1
000019AA                          1446m ; -----------------------------------------------------------------------------
000019B2                          1447              ;DRAW ELIPSE
000019B2  48A7 7E00               1448              MOVEM.W D1-D6,-(A7)
000019B6  3210                    1449              MOVE.W  (A0),D1
000019B8  3428 0002               1450              MOVE.W  2(A0),D2
000019BC  3601                    1451              MOVE.W  D1,D3
000019BE  3802                    1452              MOVE.W  D2,D4
000019C0  0643 001E               1453              ADD.W   #BOMBSIZE,D3
000019C4  0644 001E               1454              ADD.W   #BOMBSIZE,D4
000019C8  103C 0058               1455              MOVE.B  #88,D0
000019CC  4E4F                    1456              TRAP    #15
000019CE                          1457              
000019CE                          1458              ;DRAW RECTANGLE
000019CE  3210                    1459              MOVE.W  (A0),D1
000019D0  0641 000A               1460              ADD.W   #10,D1
000019D4                          1461              
000019D4  3A28 0002               1462              MOVE.W  2(A0),D5
000019D8  5545                    1463              SUB.W   #2,D5
000019DA  3405                    1464              MOVE.W  D5,D2
000019DC                          1465              
000019DC  3C10                    1466              MOVE.W  (A0),D6
000019DE  0646 0014               1467              ADD.W   #20,D6
000019E2  3606                    1468              MOVE.W  D6,D3
000019E4                          1469              
000019E4  5C45                    1470              ADD.W   #6,D5
000019E6  3805                    1471              MOVE.W  D5,D4
000019E8                          1472              
000019E8  103C 0057               1473              MOVE.B  #87,D0
000019EC  4E4F                    1474              TRAP    #15
000019EE                          1475              
000019EE                          1476m             UTLSPEN #WICKPENCL
000019EE                          1477m ; WRAPPER FOR SET PEN TRAP 15 TASK.
000019EE                          1478m ; INPUT    - #WICKPENCL COLOR IN FORMAT $00BBGGRR
000019EE                          1479m ; OUTPUT   - NONE
000019EE                          1480m ; MODIFIES - D0,D1
000019EE                          1481m ; -----------------------------------------------------------------------------
000019FA                          1482m             UTLSFIL #WICKFILCL
000019FA                          1483m ; WRAPPER FOR SET FIL TRAP 15 TASK.
000019FA                          1484m ; INPUT    - #WICKFILCL COLOR IN FORMAT $00BBGGRR
000019FA                          1485m ; OUTPUT   - NONE
000019FA                          1486m ; MODIFIES - D0,D1
000019FA                          1487m ; -----------------------------------------------------------------------------
00001A06                          1488              ;DRAW WICK
00001A06  3210                    1489              MOVE.W  (A0),D1
00001A08  0641 000D               1490              ADD.W   #13,D1
00001A0C                          1491              
00001A0C  3A28 0002               1492              MOVE.W  2(A0),D5
00001A10  5D45                    1493              SUB.W   #6,D5
00001A12  3405                    1494              MOVE.W  D5,D2
00001A14                          1495              
00001A14  3C10                    1496              MOVE.W  (A0),D6
00001A16  0646 0011               1497              ADD.W   #17,D6
00001A1A  3606                    1498              MOVE.W  D6,D3
00001A1C                          1499              
00001A1C  5645                    1500              ADD.W   #3,D5
00001A1E  3805                    1501              MOVE.W  D5,D4
00001A20                          1502              
00001A20  103C 0057               1503              MOVE.B  #87,D0
00001A24  4E4F                    1504              TRAP    #15
00001A26                          1505              
00001A26                          1506m             UTLSPEN #FIREPENCL
00001A26                          1507m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001A26                          1508m ; INPUT    - #FIREPENCL COLOR IN FORMAT $00BBGGRR
00001A26                          1509m ; OUTPUT   - NONE
00001A26                          1510m ; MODIFIES - D0,D1
00001A26                          1511m ; -----------------------------------------------------------------------------
00001A32                          1512m             UTLSFIL #FIREFILCL
00001A32                          1513m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001A32                          1514m ; INPUT    - #FIREFILCL COLOR IN FORMAT $00BBGGRR
00001A32                          1515m ; OUTPUT   - NONE
00001A32                          1516m ; MODIFIES - D0,D1
00001A32                          1517m ; -----------------------------------------------------------------------------
00001A3E                          1518              ;DRAW FIRE WICK
00001A3E  3210                    1519              MOVE.W  (A0),D1
00001A40  0641 0011               1520              ADD.W   #17,D1
00001A44                          1521              
00001A44  3A28 0002               1522              MOVE.W  2(A0),D5
00001A48  0445 000A               1523              SUB.W   #10,D5
00001A4C  3405                    1524              MOVE.W  D5,D2
00001A4E                          1525              
00001A4E  3C10                    1526              MOVE.W  (A0),D6
00001A50  0646 0015               1527              ADD.W   #21,D6
00001A54  3606                    1528              MOVE.W  D6,D3
00001A56                          1529              
00001A56  5645                    1530              ADD.W   #3,D5
00001A58  3805                    1531              MOVE.W  D5,D4
00001A5A                          1532              
00001A5A  103C 0057               1533              MOVE.B  #87,D0
00001A5E  4E4F                    1534              TRAP    #15
00001A60                          1535              
00001A60  4C9F 007E               1536              MOVEM.W (A7)+,D1-D6
00001A64  4E75                    1537              RTS
00001A66                          1538  
00001A66                          1539  
00001A66                          1540  ; -----------------------------------------------------------------------------
00001A66                          1541  BOMBXPLO
00001A66                          1542  ; EXPLODES A BOMB 
00001A66                          1543  ; INPUT    - A0 POINTER TO THE LOCAL MEMORY
00001A66                          1544  ; OUTPUT   - NONE
00001A66                          1545  ; MODIFIES - NONE
00001A66                          1546  ; -----------------------------------------------------------------------------
00001A66  48E7 F870               1547              MOVEM.L A1-A3/D0-D4,-(A7)
00001A6A  383C 0005               1548              MOVE.W  #BOMBFRAG,D4
00001A6E  43F9 00001AD0           1549  .LOOP       LEA     XPLINIT,A1
00001A74  45F9 00001B00           1550              LEA     XPLUPD,A2
00001A7A  47F9 00001B3E           1551              LEA     XPLPLOT,A3
00001A80  303C 0003               1552              MOVE.W  #XPLTYPE,D0
00001A84  3210                    1553              MOVE.W  (A0),D1
00001A86  0641 000F               1554              ADD.W   #BOMBSIZE/2,D1
00001A8A  3428 0002               1555              MOVE.W  2(A0),D2
00001A8E  0642 000F               1556              ADD.W   #BOMBSIZE/2,D2
00001A92  4EB8 1860               1557              JSR     AGLADD
00001A96  51CC FFD6               1558              DBRA.W  D4,.LOOP
00001A9A  4EB8 1222               1559              JSR     AGLKILL
00001A9E  4CDF 0E1F               1560              MOVEM.L (A7)+,A1-A3/D0-D4
00001AA2  4E75                    1561              RTS
00001AA4                          1562  
00001AA4                          1563  
00001AA4                          1564  
00001AA4                          1565  
00001AA4                          1566  
00001AA4                          1567  
00001AA4                          1568  
00001AA4                          1569  
00001AA4                          1570  
00001AA4                          1571  
00001AA4                          1572  
00001AA4                          1573  
00001AA4                          1574  
00001AA4                          1575  
00001AA4                          1576  -------------------- end include --------------------
00001AA4                          1577              INCLUDE "SPAWNER.X68"           ; SPAWNER (CREATES ASTEROIDS)
00001AA4                          1578  ; =============================================================================
00001AA4                          1579  ; SPAWNER MANAGEMENT.
00001AA4                          1580  ; =============================================================================
00001AA4                          1581  
00001AA4                          1582  ; -----------------------------------------------------------------------------
00001AA4                          1583  SPWUPD
00001AA4                          1584  ; UPDATES THE SPAWNER
00001AA4                          1585  ; INPUT    - NONE
00001AA4                          1586  ; OUTPUT   - NONE
00001AA4                          1587  ; MODIFIES - NONE
00001AA4                          1588  ; -----------------------------------------------------------------------------
00001AA4  48E7 8070               1589              MOVEM.L  D0/A1-A3,-(A7)
00001AA8  1039 00001EDF           1590              MOVE.B  (SCRCYCCT),D0
00001AAE  C07C 005F               1591              AND     #$5F,D0                 ; EVERY 16 CYCLES
00001AB2  6600 0016               1592              BNE     .END                    ; CREATE A NEW ASTEROID
00001AB6  43F8 18C4               1593              LEA     BOMBINIT,A1
00001ABA  45F8 18EE               1594              LEA     BOMBUPD,A2
00001ABE  47F8 19A2               1595              LEA     BOMBPLOT,A3
00001AC2  303C 0002               1596              MOVE.W  #ASTTYPE,D0
00001AC6  4EB8 1860               1597              JSR     AGLADD
00001ACA  4CDF 0E01               1598  .END        MOVEM.L (A7)+,D0/A1-A3
00001ACE  4E75                    1599              RTS
00001AD0                          1600  
00001AD0                          1601  
00001AD0                          1602  
00001AD0                          1603  -------------------- end include --------------------
00001AD0                          1604              INCLUDE "XPLOSION.X68"          ; EXPLOSION AGENT MANAGEMENT
00001AD0                          1605  ; =============================================================================
00001AD0                          1606  ; EXPLOSTION MANAGEMENT. IS AN AGENT.
00001AD0                          1607  ; LOCAL MEMORY IS:
00001AD0                          1608  ; +0 WORD X COORDINATE
00001AD0                          1609  ; +2 WORD Y COORDINATE
00001AD0                          1610  ; +4 WORD X SPEED
00001AD0                          1611  ; +6 WORD Y SPEED
00001AD0                          1612  ; =============================================================================
00001AD0                          1613  
00001AD0                          1614  ; -----------------------------------------------------------------------------
00001AD0                          1615  XPLINIT
00001AD0                          1616  ; INITALIZES AN EXPLOSION ITEM
00001AD0                          1617  ; INPUT    - A0 POINTER TO THE LOCAL MEMORY
00001AD0                          1618  ;            D1 X COORDINATE
00001AD0                          1619  ;            D2 Y COORDINATE
00001AD0                          1620  ; OUTPUT   - NONE
00001AD0                          1621  ; MODIFIES - NONE
00001AD0                          1622  ; NOTE     - ASSUMES SCRHEIGH IS GREATER THAN 255
00001AD0                          1623  ; -----------------------------------------------------------------------------
00001AD0  48E7 E000               1624              MOVEM.L D0-D2,-(A7)
00001AD4  3081                    1625              MOVE.W  D1,(A0)                 ; SET X POSITION
00001AD6  3142 0002               1626              MOVE.W  D2,2(A0)                ; SET Y POSITION
00001ADA  4EB8 1274               1627              JSR     UTLRAND                 ; SET RANDOM SPEEDS
00001ADE  C07C 001F               1628              AND.W   #$01F,D0
00001AE2  0440 000F               1629              SUB.W   #$0F,D0
00001AE6  3140 0004               1630              MOVE.W  D0,4(A0)
00001AEA  4EB8 1274               1631              JSR     UTLRAND
00001AEE  C07C 001F               1632              AND.W   #$01F,D0
00001AF2  0440 000F               1633              SUB.W   #$0F,D0
00001AF6  3140 0006               1634              MOVE.W  D0,6(A0)
00001AFA  4CDF 0007               1635              MOVEM.L (A7)+,D0-D2
00001AFE  4E75                    1636              RTS
00001B00                          1637  
00001B00                          1638  ; -----------------------------------------------------------------------------
00001B00                          1639  XPLUPD
00001B00                          1640  ; UPDATES AN EXPLOSION ITEM
00001B00                          1641  ; INPUT    - A0 POINTER TO THE LOCAL MEMORY
00001B00                          1642  ; OUTPUT   - NONE
00001B00                          1643  ; MODIFIES - NONE
00001B00                          1644  ; -----------------------------------------------------------------------------
00001B00  3F00                    1645              MOVE.W  D0,-(A7)
00001B02  3028 0004               1646              MOVE.W  4(A0),D0                ; UPDATE COORDINATES
00001B06  9150                    1647              SUB.W   D0,(A0)
00001B08  3028 0006               1648              MOVE.W  6(A0),D0
00001B0C  D168 0002               1649              ADD.W   D0,2(A0)
00001B10  0C50 FFEC               1650              CMP.W   #-XPLSIZE,(A0)
00001B14  6F00 0022               1651              BLE     .KILL
00001B18  0C50 0280               1652              CMP.W   #SCRWIDTH,(A0)
00001B1C  6C00 001A               1653              BGE     .KILL
00001B20  0C68 FFEC 0002          1654              CMP.W   #-XPLSIZE,2(A0)
00001B26  6F00 0010               1655              BLE     .KILL
00001B2A  0C68 01E0 0002          1656              CMP.W   #SCRHEIGH,2(A0)
00001B30  6C00 0006               1657              BGE     .KILL
00001B34  301F                    1658  .END        MOVE.W  (A7)+,D0
00001B36  4E75                    1659              RTS
00001B38  4EB8 1222               1660  .KILL       JSR   AGLKILL
00001B3C  60F6                    1661              BRA   .END
00001B3E                          1662  
00001B3E                          1663  ; -----------------------------------------------------------------------------
00001B3E                          1664  XPLPLOT
00001B3E                          1665  ; PLOTS AN EXPLOSION ITEM
00001B3E                          1666  ; INPUT    - A0 POINTER TO THE LOCAL MEMORY
00001B3E                          1667  ; OUTPUT   - NONE
00001B3E                          1668  ; MODIFIES - NONE
00001B3E                          1669  ; -----------------------------------------------------------------------------
00001B3E                          1670m             UTLSPEN #XPLPENCL
00001B3E                          1671m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001B3E                          1672m ; INPUT    - #XPLPENCL COLOR IN FORMAT $00BBGGRR
00001B3E                          1673m ; OUTPUT   - NONE
00001B3E                          1674m ; MODIFIES - D0,D1
00001B3E                          1675m ; -----------------------------------------------------------------------------
00001B4A                          1676m             UTLSFIL #XPLFILCL
00001B4A                          1677m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001B4A                          1678m ; INPUT    - #XPLFILCL COLOR IN FORMAT $00BBGGRR
00001B4A                          1679m ; OUTPUT   - NONE
00001B4A                          1680m ; MODIFIES - D0,D1
00001B4A                          1681m ; -----------------------------------------------------------------------------
00001B56  48A7 7800               1682              MOVEM.W D1-D4,-(A7)
00001B5A  3210                    1683              MOVE.W  (A0),D1
00001B5C  3428 0002               1684              MOVE.W  2(A0),D2
00001B60  3601                    1685              MOVE.W  D1,D3
00001B62  3802                    1686              MOVE.W  D2,D4
00001B64  0643 0014               1687              ADD.W   #XPLSIZE,D3
00001B68  0644 0014               1688              ADD.W   #XPLSIZE,D4
00001B6C  103C 0058               1689              MOVE.B  #88,D0
00001B70  4E4F                    1690              TRAP    #15
00001B72  4C9F 001E               1691              MOVEM.W (A7)+,D1-D4
00001B76  4E75                    1692              RTS
00001B76  4E75                    1693  -------------------- end include --------------------
00001B78                          1694              INCLUDE "BACKGROUND.X68"        ; BACKGROUND MANAGEMENT
00001B78                          1695  ; =============================================================================
00001B78                          1696  ; BACKGROUND MANAGEMENT
00001B78                          1697  ; =============================================================================
00001B78                          1698  
00001B78                          1699  ; -----------------------------------------------------------------------------
00001B78                          1700  BCKPLOT
00001B78                          1701  ; PLOTS THE BACKGROUND
00001B78                          1702  ; INPUT     - NONE
00001B78                          1703  ; OUTPUT    - NONE
00001B78                          1704  ; MODIFIES  - NONE
00001B78                          1705  ; -----------------------------------------------------------------------------
00001B78  48E7 F800               1706              MOVEM.L D0-D4,-(A7)
00001B7C                          1707m             UTLSPEN #BCKSKYCL
00001B7C                          1708m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001B7C                          1709m ; INPUT    - #BCKSKYCL COLOR IN FORMAT $00BBGGRR
00001B7C                          1710m ; OUTPUT   - NONE
00001B7C                          1711m ; MODIFIES - D0,D1
00001B7C                          1712m ; -----------------------------------------------------------------------------
00001B88                          1713m             UTLSFIL #BCKSKYCL
00001B88                          1714m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001B88                          1715m ; INPUT    - #BCKSKYCL COLOR IN FORMAT $00BBGGRR
00001B88                          1716m ; OUTPUT   - NONE
00001B88                          1717m ; MODIFIES - D0,D1
00001B88                          1718m ; -----------------------------------------------------------------------------
00001B94                          1719              
00001B94                          1720              ; PLOT SKY
00001B94  323C 0000               1721              MOVE.W  #0,D1
00001B98  343C 0000               1722              MOVE.W  #0,D2
00001B9C  3601                    1723              MOVE.W  D1,D3
00001B9E  3802                    1724              MOVE.W  D2,D4
00001BA0  0643 0280               1725              ADD.W   #BCKSKYW,D3
00001BA4  0644 0078               1726              ADD.W   #BCKSKYH,D4
00001BA8  103C 0057               1727              MOVE.B  #87,D0
00001BAC  4E4F                    1728              TRAP    #15
00001BAE                          1729              
00001BAE                          1730m             UTLSPEN #BCKGRCL
00001BAE                          1731m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001BAE                          1732m ; INPUT    - #BCKGRCL COLOR IN FORMAT $00BBGGRR
00001BAE                          1733m ; OUTPUT   - NONE
00001BAE                          1734m ; MODIFIES - D0,D1
00001BAE                          1735m ; -----------------------------------------------------------------------------
00001BBA                          1736m             UTLSFIL #BCKGRCL
00001BBA                          1737m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001BBA                          1738m ; INPUT    - #BCKGRCL COLOR IN FORMAT $00BBGGRR
00001BBA                          1739m ; OUTPUT   - NONE
00001BBA                          1740m ; MODIFIES - D0,D1
00001BBA                          1741m ; -----------------------------------------------------------------------------
00001BC6                          1742              ; PLOT GROUND
00001BC6  323C 0000               1743              MOVE.W  #0,D1
00001BCA  343C 0000               1744              MOVE.W  #0,D2
00001BCE  0642 0078               1745              ADD.W   #BCKSKYH,D2
00001BD2  3601                    1746              MOVE.W  D1,D3
00001BD4  3802                    1747              MOVE.W  D2,D4
00001BD6  0643 0280               1748              ADD.W   #BCKGRW,D3
00001BDA  0644 0168               1749              ADD.W   #BCKGRH,D4
00001BDE  103C 0057               1750              MOVE.B  #87,D0
00001BE2  4E4F                    1751              TRAP    #15
00001BE4                          1752              
00001BE4  4CDF 001F               1753              MOVEM.L (A7)+,D0-D4
00001BE8  4E75                    1754              RTS
00001BE8  4E75                    1755  -------------------- end include --------------------
00001BEA                          1756              INCLUDE "STATES.X68"            ; GAME STATES MANAGEMENT
00001BEA                          1757  ; =============================================================================
00001BEA                          1758  ; GAME STATE MANAGEMENT
00001BEA                          1759  ; =============================================================================
00001BEA                          1760  
00001BEA                          1761  ; -----------------------------------------------------------------------------
00001BEA                          1762  STAINIT
00001BEA                          1763  ; INITALIZES THE STATE MANAGER
00001BEA                          1764  ; INPUT    - NONE
00001BEA                          1765  ; OUTPUT   - NONE
00001BEA                          1766  ; MODIFIES - NONE
00001BEA                          1767  ; -----------------------------------------------------------------------------
00001BEA  45F9 00002B80           1768              LEA.L   STATES,A2
00001BF0  23EA 0004 00002BA8      1769              MOVE.L  1*4(A2),STATE 
00001BF8  42B9 00002BB0           1770              CLR.L   (GAMEOVERB)
00001BFE  4E75                    1771              RTS
00001C00                          1772  ; -----------------------------------------------------------------------------
00001C00                          1773  STAMENU
00001C00                          1774  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
00001C00                          1775  ; INPUT    - NONE
00001C00                          1776  ; OUTPUT   - NONE
00001C00                          1777  ; MODIFIES - NONE
00001C00                          1778  ; -----------------------------------------------------------------------------          
00001C00  47F9 00002B98           1779              LEA.L   STATESP,A3
00001C06  23D3 00002BAC           1780              MOVE.L  (A3),STATEP             ;STATE PLOT = INIT PLOT 
00001C0C  0839 0004 00001EDD      1781              BTST.B  #4,KBDEDGE              ; IF "SPACE" IS PRESSED
00001C14  6700 0010               1782              BEQ     .END
00001C18  45F9 00002B80           1783              LEA.L   STATES,A2               ; A2 = STATES LIST
00001C1E  23EA 0008 00002BA8      1784              MOVE.L  2*4(A2),STATE           ; UPDATES NEXT STATE (GAME STATE)
00001C26  4E75                    1785  .END        RTS
00001C28                          1786  ; -----------------------------------------------------------------------------
00001C28                          1787  
00001C28                          1788  ; -----------------------------------------------------------------------------
00001C28                          1789  STAGAME 
00001C28                          1790  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
00001C28                          1791  ; INPUT    - NONE
00001C28                          1792  ; OUTPUT   - NONE
00001C28                          1793  ; MODIFIES - NONE
00001C28                          1794  ; -----------------------------------------------------------------------------
00001C28  4EB8 1392               1795               JSR PLRINIT                     ;INIT PLAYER AND BOMBMAN
00001C2C  4EB8 1572               1796               JSR BMNINIT            
00001C30  45F9 00002B80           1797               LEA.L   STATES,A2               ; A0 = STATES LIST
00001C36  23EA 000C 00002BA8      1798               MOVE.L  3*4(A2),STATE           ; NEXT STATE = STAUPD
00001C3E  4E75                    1799               RTS
00001C40                          1800  
00001C40                          1801  
00001C40                          1802  STAUPD
00001C40                          1803  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
00001C40                          1804  ; INPUT    - NONE
00001C40                          1805  ; OUTPUT   - NONE
00001C40                          1806  ; MODIFIES - NONE
00001C40                          1807  ; -----------------------------------------------------------------------------
00001C40  47F9 00002B98           1808              LEA.L   STATESP,A3
00001C46  23EB 0004 00002BAC      1809              MOVE.L  1*4(A3),STATEP           ;UPDATE GAME PLOT
00001C4E  4A79 00002BBA           1810              TST.W   (PLRLIFE)                ;CHECK PLAYER LIFE      
00001C54  6C00 0016               1811              BGE     .NOTOVER            
00001C58  45F9 00002B80           1812              LEA.L    STATES,A2
00001C5E  23EA 0014 00002BA8      1813              MOVE.L  5*4(A2),STATE            ;GAME OVER PLOT
00001C66  4EF9 00001CBC           1814              JMP     .FIN
00001C6C                          1815             
00001C6C  0839 0007 00001EDD      1816  .NOTOVER    BTST.B  #7,KBDEDGE              ;IF "P" (PAUSE) IS PRESSED
00001C74  6700 0010               1817              BEQ     .NEXT
00001C78  45F9 00002B80           1818              LEA.L   STATES,A2               ; A2 = STATES LIST
00001C7E  23EA 0010 00002BA8      1819              MOVE.L  4*4(A2),STATE           ; STATE = STAPAUS 
00001C86                          1820   
00001C86  4EB8 158C               1821  .NEXT       JSR     BMNUPD                  ; UPDATE GAME
00001C8A  4EB8 13B2               1822              JSR     PLRUPD 
00001C8E  4EB8 1AA4               1823              JSR     SPWUPD
00001C92  4EB8 187A               1824              JSR     AGLUPD
00001C96  4A79 00002BBA           1825              TST.W   (PLRLIFE)
00001C9C  6E00 001E               1826              BGT     .FIN
00001CA0  45F9 00002B80           1827              LEA.L   STATES,A2               ;GAME OVER UPDATE
00001CA6  23EA 0014 00002BA8      1828              MOVE.L  5*4(A2),STATE
00001CAE  47F9 00002B98           1829              LEA.L   STATESP,A3              ;GAME OVER PLOT
00001CB4  23EA 000C 00002BAC      1830              MOVE.L  3*4(A2),STATEP                    
00001CBC  4E75                    1831  .FIN        RTS
00001CBE                          1832  
00001CBE                          1833    
00001CBE                          1834  
00001CBE                          1835  STAUPDP
00001CBE                          1836  ; PERFORMS STATE UPDATE PLOT 
00001CBE                          1837  ; INPUT    - NONE
00001CBE                          1838  ; OUTPUT   - NONE
00001CBE                          1839  ; MODIFIES - NONE
00001CBE                          1840  ; -----------------------------------------------------------------------------
00001CBE  4EB8 1B78               1841              JSR     BCKPLOT
00001CC2  4EB8 13FE               1842              JSR     PLRPLOT      
00001CC6  4EB8 1602               1843              JSR     BMNPLOT            
00001CCA  4EB8 189E               1844              JSR     AGLPLOT    
00001CCE  4E75                    1845  .END        RTS
00001CD0                          1846  ; -----------------------------------------------------------------------------
00001CD0                          1847  
00001CD0                          1848  
00001CD0                          1849  STAPLOT
00001CD0                          1850  ; PERFORMS STATE PLOT
00001CD0                          1851  ; INPUT    - NONE
00001CD0                          1852  ; OUTPUT   - NONE
00001CD0                          1853  ; MODIFIES - NONE
00001CD0                          1854  ; -----------------------------------------------------------------------------
00001CD0  2879 00002BAC           1855               MOVE.L     STATEP,A4
00001CD6  4E94                    1856               JSR        (A4)
00001CD8  4E75                    1857               RTS
00001CDA                          1858  
00001CDA                          1859  STAINTRP
00001CDA                          1860  ; INTRO STATE PLOT
00001CDA                          1861  ; INPUT    - NONE
00001CDA                          1862  ; OUTPUT   - NONE
00001CDA                          1863  ; MODIFIES - NONE
00001CDA                          1864  ; -----------------------------------------------------------------------------
00001CDA  48E7 C040               1865              MOVEM.L A1/D0-D1,-(A7)
00001CDE                          1866m             UTLLOCT INTTITX,INTTITY
00001CDE                          1867m ; WRAPPER TO TEXT POSITIONNING FROM TRAP 15
00001CDE                          1868m ; INPUT    - INTTITX X, INTTITY Y
00001CDE                          1869m ; OUTPUT   - NONE
00001CDE                          1870m ; MODIFIES - D0,D1
00001CDE                          1871m ; -----------------------------------------------------------------------------
00001CE8                          1872m             UTLSPEN #INTTITC
00001CE8                          1873m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001CE8                          1874m ; INPUT    - #INTTITC COLOR IN FORMAT $00BBGGRR
00001CE8                          1875m ; OUTPUT   - NONE
00001CE8                          1876m ; MODIFIES - D0,D1
00001CE8                          1877m ; -----------------------------------------------------------------------------
00001CF4                          1878m             UTLSFIL #$00000000
00001CF4                          1879m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001CF4                          1880m ; INPUT    - #$00000000 COLOR IN FORMAT $00BBGGRR
00001CF4                          1881m ; OUTPUT   - NONE
00001CF4                          1882m ; MODIFIES - D0,D1
00001CF4                          1883m ; -----------------------------------------------------------------------------
00001CFC  43F9 00001D38           1884              LEA     .TITSTR,A1
00001D02  103C 000E               1885              MOVE.B  #14,D0
00001D06  4E4F                    1886              TRAP    #15
00001D08                          1887  
00001D08                          1888m             UTLLOCT INTPRSX,INTPRSY
00001D08                          1889m ; WRAPPER TO TEXT POSITIONNING FROM TRAP 15
00001D08                          1890m ; INPUT    - INTPRSX X, INTPRSY Y
00001D08                          1891m ; OUTPUT   - NONE
00001D08                          1892m ; MODIFIES - D0,D1
00001D08                          1893m ; -----------------------------------------------------------------------------
00001D12                          1894m             UTLSPEN #INTPRSC
00001D12                          1895m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001D12                          1896m ; INPUT    - #INTPRSC COLOR IN FORMAT $00BBGGRR
00001D12                          1897m ; OUTPUT   - NONE
00001D12                          1898m ; MODIFIES - D0,D1
00001D12                          1899m ; -----------------------------------------------------------------------------
00001D1E                          1900m             UTLSFIL #$00000000
00001D1E                          1901m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001D1E                          1902m ; INPUT    - #$00000000 COLOR IN FORMAT $00BBGGRR
00001D1E                          1903m ; OUTPUT   - NONE
00001D1E                          1904m ; MODIFIES - D0,D1
00001D1E                          1905m ; -----------------------------------------------------------------------------
00001D26  43F9 00001D46           1906              LEA     .PRSSTR,A1
00001D2C  103C 000E               1907              MOVE.B  #14,D0
00001D30  4E4F                    1908              TRAP    #15
00001D32  4CDF 0203               1909              MOVEM.L (A7)+,A1/D0-D1
00001D36  4E75                    1910              RTS
00001D38                          1911  
00001D38= 4B 41 42 4F 4F 4D ...   1912  .TITSTR     DC.B    'KABOOM! 68000',0
00001D46= 50 55 53 48 20 46 ...   1913  .PRSSTR     DC.B    'PUSH FIRE TO START',0
00001D5A                          1914              DS.W    0
00001D5A                          1915  
00001D5A                          1916  
00001D5A                          1917  ; -----------------------------------------------------------------------------
00001D5A                          1918  STAPAUS
00001D5A                          1919  ; PERFORMS STATE PAUSED
00001D5A                          1920  ; INPUT    - NONE
00001D5A                          1921  ; OUTPUT   - NONE
00001D5A                          1922  ; MODIFIES - NONE
00001D5A                          1923  ; -----------------------------------------------------------------------------
00001D5A  47F9 00002B98           1924              LEA.L   STATESP,A3               ; A3 = STATES LIST
00001D60  23EB 0008 00002BAC      1925              MOVE.L  2*4(A3),STATEP           ; STATEP = STAUPAUSP           
00001D68  0839 0007 00001EDD      1926              BTST.B  #7,KBDEDGE               ;IF "P" (PAUSE) IS PRESSED
00001D70  6700 0010               1927              BEQ     .NEXT
00001D74  45F9 00002B80           1928              LEA.L   STATES,A2               ; A0 = STATES LIST
00001D7A  23EA 000C 00002BA8      1929              MOVE.L  3*4(A2),STATE           ; STATE = STAPAUS 
00001D82  4E75                    1930  .NEXT       RTS
00001D84                          1931         
00001D84                          1932  ; -----------------------------------------------------------------------------
00001D84                          1933  
00001D84                          1934  ; -----------------------------------------------------------------------------
00001D84                          1935  STAPAUSP
00001D84                          1936  ; PERFORMS STATE PAUSED PLOT
00001D84                          1937  ; INPUT    - NONE
00001D84                          1938  ; OUTPUT   - NONE
00001D84                          1939  ; MODIFIES - NONE
00001D84                          1940  ; ----------------------------------------------------------------------------- 
00001D84  4EB8 1B78               1941              JSR     BCKPLOT    
00001D88  4EB8 13FE               1942              JSR     PLRPLOT      
00001D8C  4EB8 1602               1943              JSR     BMNPLOT            
00001D90  4EB8 189E               1944              JSR     AGLPLOT      
00001D94                          1945m             UTLLOCT PAUSTITX,PAUSTITY
00001D94                          1946m ; WRAPPER TO TEXT POSITIONNING FROM TRAP 15
00001D94                          1947m ; INPUT    - PAUSTITX X, PAUSTITY Y
00001D94                          1948m ; OUTPUT   - NONE
00001D94                          1949m ; MODIFIES - D0,D1
00001D94                          1950m ; -----------------------------------------------------------------------------
00001D9E                          1951m             UTLSPEN #INTTITC
00001D9E                          1952m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001D9E                          1953m ; INPUT    - #INTTITC COLOR IN FORMAT $00BBGGRR
00001D9E                          1954m ; OUTPUT   - NONE
00001D9E                          1955m ; MODIFIES - D0,D1
00001D9E                          1956m ; -----------------------------------------------------------------------------
00001DAA                          1957m             UTLSFIL #$00000000
00001DAA                          1958m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001DAA                          1959m ; INPUT    - #$00000000 COLOR IN FORMAT $00BBGGRR
00001DAA                          1960m ; OUTPUT   - NONE
00001DAA                          1961m ; MODIFIES - D0,D1
00001DAA                          1962m ; -----------------------------------------------------------------------------
00001DB2  43F9 00001DC0           1963              LEA     .PAUSSTR,A1
00001DB8  103C 000E               1964              MOVE.B  #14,D0
00001DBC  4E4F                    1965              TRAP    #15
00001DBE  4E75                    1966  .NEXT       RTS
00001DC0                          1967  
00001DC0                          1968  
00001DC0                          1969              
00001DC0= 47 41 4D 45 20 50 ...   1970  .PAUSSTR    DC.B    'GAME PAUSED PUSH "P" TO START',0
00001DDE                          1971  ; -----------------------------------------------------------------------------
00001DDE                          1972  
00001DDE                          1973  ; -----------------------------------------------------------------------------
00001DDE                          1974  STAGOVRU
00001DDE                          1975  ; GAME OVER STATE UPDATE
00001DDE                          1976  ; INPUT    - NONE
00001DDE                          1977  ; OUTPUT   - NONE
00001DDE                          1978  ; MODIFIES - NONE
00001DDE                          1979  ; -----------------------------------------------------------------------------
00001DDE  4A79 00002BB0           1980              TST.W   (GAMEOVERB)             ;SAYS GAME OVER ONCE
00001DE4  6600 000C               1981              BNE     .NEXT                    
00001DE8                          1982m             UTLSND  .GAMEOVER
00001DE8                          1983m ; WRAPPER FOR PLAYING WAV FILE TRAP 15 TASK
00001DE8                          1984m ; INPUT    - .GAMEOVER ADDRESS TO STRING WITH NAME OF THE FILE
00001DE8                          1985m ; OUTPUT   - D0.W=0 IF SOUND NOT PLAYED, NON ZERO IF PLAYED
00001DE8                          1986m ; MODIFIES - D0,A1
00001DE8                          1987m ; -----------------------------------------------------------------------------
00001DF2  13FC 0001 00002BB0      1988  .NEXT       MOVE.B  #1,(GAMEOVERB)  
00001DFA  23EB 000C 00002BAC      1989              MOVE.L  3*4(A3),STATEP          ; UPDATES NEXT STATE
00001E02  0839 0004 00001EDD      1990              BTST.B  #4,KBDEDGE
00001E0A  6700 0016               1991              BEQ     .END
00001E0E  45F9 00002B80           1992              LEA.L   STATES,A2               ; A0 = STATES LIST
00001E14  23EA 0008 00002BA8      1993              MOVE.L  2*4(A2),STATE           ; UPDATES NEXT STATE
00001E1C  42B9 00002BB0           1994              CLR.L   (GAMEOVERB)             ; CLEARS GAME OVER BIT
00001E22  4E75                    1995  .END        RTS
00001E24= 534F554E 442F4741 ...   1996  .GAMEOVER DC.L 'SOUND/GAMEOVER.WAV',0 
00001E3C                          1997  
00001E3C                          1998  ; -----------------------------------------------------------------------------
00001E3C                          1999  STAGOVRP
00001E3C                          2000  ; GAME OVER STATE PLOT
00001E3C                          2001  ; INPUT    - NONE
00001E3C                          2002  ; OUTPUT   - NONE
00001E3C                          2003  ; MODIFIES - NONE
00001E3C                          2004  ; -----------------------------------------------------------------------------           
00001E3C  48E7 C040               2005              MOVEM.L A1/D0-D1,-(A7)
00001E40                          2006m             UTLLOCT GOVSTRX,GOVSTRY
00001E40                          2007m ; WRAPPER TO TEXT POSITIONNING FROM TRAP 15
00001E40                          2008m ; INPUT    - GOVSTRX X, GOVSTRY Y
00001E40                          2009m ; OUTPUT   - NONE
00001E40                          2010m ; MODIFIES - D0,D1
00001E40                          2011m ; -----------------------------------------------------------------------------
00001E4A                          2012m             UTLSPEN #GOVSTRC
00001E4A                          2013m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001E4A                          2014m ; INPUT    - #GOVSTRC COLOR IN FORMAT $00BBGGRR
00001E4A                          2015m ; OUTPUT   - NONE
00001E4A                          2016m ; MODIFIES - D0,D1
00001E4A                          2017m ; -----------------------------------------------------------------------------
00001E56                          2018m             UTLSFIL #$00000000
00001E56                          2019m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001E56                          2020m ; INPUT    - #$00000000 COLOR IN FORMAT $00BBGGRR
00001E56                          2021m ; OUTPUT   - NONE
00001E56                          2022m ; MODIFIES - D0,D1
00001E56                          2023m ; -----------------------------------------------------------------------------
00001E5E  43F9 00001E70           2024              LEA     .GOVSTR,A1
00001E64  103C 000E               2025              MOVE.B  #14,D0
00001E68  4E4F                    2026              TRAP    #15
00001E6A  4CDF 0203               2027              MOVEM.L (A7)+,A1/D0-D1
00001E6E  4E75                    2028              RTS
00001E70                          2029  
00001E70= 47 41 4D 45 20 20 ...   2030  .GOVSTR     DC.B    'GAME  OVER',0
00001E7C                          2031              DS.W    0
00001E7C                          2032  
00001E7C                          2033  
00001E7C                          2034  
00001E7C                          2035  
00001E7C                          2036  
00001E7C                          2037  
00001E7C                          2038  
00001E7C                          2039  
00001E7C                          2040  
00001E7C                          2041  
00001E7C                          2042  
00001E7C                          2043  
00001E7C                          2044  
00001E7C                          2045  
00001E7C                          2046  
00001E7C                          2047  
00001E7C                          2048  
00001E7C                          2049  
00001E7C                          2050  
00001E7C                          2051  
00001E7C                          2052  
00001E7C                          2053  
00001E7C                          2054  
00001E7C                          2055  -------------------- end include --------------------
00001E7C                          2056              ; TO DO: PUT YOUR GAME-RELATED INCLUDES HERE
00001E7C                          2057  
00001E7C                          2058  ; --- INITIALIZE --------------------------------------------------------------
00001E7C                          2059  
00001E7C                          2060  SYSCOUNT    DS.W    1
00001E7E  =000003E8               2061  SYSKONST    EQU     1000
00001E7E                          2062             
00001E7E                          2063                          
00001E7E                          2064  
00001E7E  4EB8 1000               2065  START       JSR     SYSINIT
00001E82                          2066              ; TO DO: CALL GAME INITIALIZATION CODE HERE
00001E82  4EB8 1BEA               2067              JSR     STAINIT                 ; INITIALIZE GAME STATE
00001E86                          2068              
00001E86                          2069  
00001E86                          2070  ; --- UPDATE ------------------------------------------------------------------
00001E86                          2071  
00001E86  4E40                    2072  .LOOP       TRAP    #KBDTRAP                ; READ KEYBOARD
00001E88                          2073              ; TO DO: CALL GAME UPDATE CODE HERE
00001E88  2479 00002BA8           2074              MOVE.L  STATE,A2
00001E8E  4E92                    2075              JSR     (A2)
00001E90                          2076  
00001E90                          2077  
00001E90                          2078  ; --- WAIT SYNCH --------------------------------------------------------------
00001E90                          2079  
00001E90  4A39 00001EDE           2080  .WINT       TST.B   (SCRINTCT)              ; WAIT FOR INTERRUPT            
00001E96  67F8                    2081              BEQ     .WINT
00001E98  5339 00001EDE           2082              SUBQ.B   #1,(SCRINTCT)            
00001E9E  5238 1E7C               2083              ADDQ.B   #1,(SYSCOUNT)
00001EA2  5239 00001EDF           2084              ADDQ.B   #1,(SCRCYCCT)
00001EA8  323C 00C8               2085              MOVE.W   #200,D1
00001EAC  B239 00001EDF           2086              CMP.B    (SCRCYCCT),D1
00001EB2  6600 0008               2087              BNE      .SKIP
00001EB6  4239 00001EDF           2088              CLR.B    (SCRCYCCT)
00001EBC  3038 1E7C               2089  .SKIP       MOVE.W   (SYSCOUNT),D0            
00001EC0                          2090  *           AND.W    (SCRINTCT),D0
00001EC0  B07C 03E8               2091              CMP.W     #SYSKONST,D0
00001EC4  63C0                    2092              BLS      .LOOP     
00001EC6  4239 00001EDE           2093              CLR.B    (SCRINTCT)
00001ECC  4238 1E7C               2094              CLR.B    (SYSCOUNT)
00001ED0                          2095              
00001ED0                          2096              ;para la implementacion de la parte obligatoria del grupo de tres hay que mira en (SCRINTCT) si es 0
00001ED0                          2097              ;si lo es hay que dejarlo como esta sino vamos a otro que reste 1 pero tiene que tener un maximo
00001ED0                          2098  ; --- PLOT --------------------------------------------------------------------
00001ED0                          2099  
00001ED0                          2100              ; TO DO: CALL GAME PLOT CODE HERE
00001ED0  4EB8 1CD0               2101              JSR      STAPLOT
00001ED4  4E41                    2102              TRAP    #SCRTRAP                ; SHOW GRAPHICS
00001ED6  60AE                    2103              BRA     .LOOP
00001ED8  FFFF FFFF               2104              SIMHALT
00001EDC                          2105  
00001EDC                          2106  ; --- VARIABLES ---------------------------------------------------------------
00001EDC                          2107  
00001EDC                          2108              INCLUDE "SYSVAR.X68"
00001EDC                          2109  ; =============================================================================
00001EDC                          2110  ; SYSTEM VARS
00001EDC                          2111  ; NOTE THAT ALL THESE VARS ARE USED TO SHARE DATA FROM SYSTEM TO USER. THUS
00001EDC                          2112  ; THEY MUST NOT BE IN PROTECTED MEMORY.
00001EDC                          2113  ; NOTE THAT USING DMMDATA IN SUCH WAY IS A BAD IDEA, AS USER APPLICATIONS CAN
00001EDC                          2114  ; ALSO FREE OR CHANGE OWNERSHIP. NONETHELESS, FOR THE SAKE OF THIS EXAMPLE
00001EDC                          2115  ; THIS IS GOOD ENOUGH.
00001EDC                          2116  ; =============================================================================
00001EDC                          2117  
00001EDC                          2118  ; --- KEYBOARD RELATED VARIABLES ----------------------------------------------
00001EDC                          2119  
00001EDC                          2120  KBDVAL      DS.B    1                       ; KEY PRESSED=1
00001EDD                          2121  KBDEDGE     DS.B    1                       ; KEY CHANGED=1
00001EDE                          2122  
00001EDE                          2123              DS.W    0
00001EDE                          2124  
00001EDE                          2125  ; --- SCREEN RELATED VARIABLES ------------------------------------------------
00001EDE                          2126  
00001EDE                          2127  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER/FLAG
00001EDF                          2128  SCRCYCCT    DS.B    1                       ; CYCLE COUNTER
00001EE0                          2129              DS.W    0
00001EE0                          2130  
00001EE0                          2131  ; --- DYNAMIC MEMORY VARIABLES ------------------------------------------------
00001EE0                          2132  
00001F00                          2133              ORG     (*+DMMBSIZE-1)&-DMMBSIZE ; ALIGN TO DMMBSIZE
00001F00                          2134  DMMDATA     DS.B    DMMBSIZE*DMMBNUM        ; DYNAMIC MEMORY ALLOCATION SPACE
00002B80                          2135              DS.W    0                       ; JUST IN CASE (SIZE IS POW OF TWO)
00002B80                          2136  
00002B80                          2137  
00002B80                          2138  -------------------- end include --------------------
00002B80                          2139              INCLUDE "VAR.X68"
00002B80                          2140  ; =============================================================================
00002B80                          2141  ; GAME VARS
00002B80                          2142  ; =============================================================================
00002B80                          2143  
00002B80                          2144  ; TO DO: DECLARE GAME VARIABLES HERE.
00002B80                          2145  
00002B80                          2146  
00002B80                          2147  ; --- GAME STATE RELATED VARIABLES --------------------------------------------
00002B80                          2148  
00002B80                          2149  
00002B80= 00001BEA                2150  STATES      DC.L    STAINIT                 ;INITIALIZE STATE 0
00002B84= 00001C00                2151              DC.L    STAMENU                 ;MENU STATE       1
00002B88= 00001C28                2152              DC.L    STAGAME                 ;GAME STATE       2
00002B8C= 00001C40                2153              DC.L    STAUPD                  ;UPDATE STATE     3
00002B90= 00001D5A                2154              DC.L    STAPAUS                 ;PAUSED STATE     4 
00002B94= 00001DDE                2155              DC.L    STAGOVRU                ;GAME OVER STATE  5
00002B98                          2156              
00002B98= 00001CDA                2157  STATESP     DC.L    STAINTRP                ;INIT PLOT        0
00002B9C= 00001CBE                2158              DC.L    STAUPDP                 ;UPDATE PLOT      1
00002BA0= 00001D84                2159              DC.L    STAPAUSP                ;PAUSE PLOT       2
00002BA4= 00001E3C                2160              DC.L    STAGOVRP                ;GAME OVER PLOT   3
00002BA8                          2161              
00002BA8                          2162  STATE       DS.L    1                       ;CURRENT STATE
00002BAC                          2163  STATEP      DS.L    1                       ;CURRENT STATE PLOT
00002BB0                          2164  
00002BB0                          2165  GAMEOVERB    DS.W    1                      ;GAME OVER BIT 1-NOT SOUND 0-SOUND
00002BB2                          2166  
00002BB2                          2167  ; --- PLAYER RELATED VARIABLES ------------------------------------------------
00002BB2                          2168  
00002BB2                          2169  PLRPOSX     DS.W    1                       ; PLAYER X POSITION (PIXELS)
00002BB4                          2170  PLRPOSY     DS.W    1                       ; PLAYER Y POSITION (PIXELS)
00002BB6                          2171  PLRENER     DS.W    1                       ; PLAYER ENERGY
00002BB8                          2172  PLRSCORE    DS.W    1                       ; PLAYER SCORE
00002BBA                          2173  PLRLIFE     DS.W    1                       ; PLAYER IN GAME LIFE
00002BBC                          2174  
00002BBC                          2175  PLRDMG      DS.B    1                       ; BIT0: UPD DAMAGE, BIT1 PLOT DMG
00002BBE                          2176              DS.W    0
00002BBE                          2177  
00002BBE                          2178  ; --- BOMBMAN RELATED VARIABLES ------------------------------------------------
00002BBE                          2179  
00002BBE                          2180  BMNPOSX     DS.W    1                       ; BOMBMAN X POSITION  (PIXELS) 
00002BC0                          2181  BMNPOSY     DS.W    1                       ; BOMBMAN Y POSITION  (PIXELS)
00002BC2                          2182  BMNDIR      DS.W    1                       ; BOMBMAN DIRECTION 
00002BC4                          2183                                              ; RIGHT > #128  LEFT < #128 
00002BC4                          2184  
00002BC4                          2185  ; --- UTILITY VARIABLES ------------------------------------------------------
00002BC4                          2186  
00002BC4                          2187  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
00002BC6                          2188              DS.W    0
00002BC6                          2189  
00002BC6                          2190  
00002BC6                          2191  
00002BC6                          2192  
00002BC6                          2193  
00002BC6                          2194  
00002BC6                          2195  
00002BC6                          2196  
00002BC6                          2197  
00002BC6                          2198  
00002BC6                          2199  
00002BC6                          2200  
00002BC6                          2201  
00002BC6                          2202  
00002BC6                          2203  
00002BC6                          2204  
00002BC6                          2205  
00002BC6                          2206  
00002BC6                          2207  -------------------- end include --------------------
00002BC6                          2208              END    START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
AGLADD              1860
AGLADD:END          1876
AGLKILL             1222
AGLPLOT             189E
AGLPLOT:END         18BE
AGLPLOT:LOOP        18A6
AGLUPD              187A
AGLUPD:END          1898
AGLUPD:LOOP         1882
ASTTYPE             2
BCKGRCL             E6800
BCKGRH              168
BCKGRW              280
BCKPLOT             1B78
BCKSKYCL            FF6150
BCKSKYH             78
BCKSKYW             280
BMNARMH             28
BMNARMW             1
BMNBDYNCKH          2
BMNBDYNCKW          1E
BMNBODYH            32
BMNBODYW            32
BMNDIR              2BC2
BMNEYEH             5
BMNEYEW             5
BMNHANDH            5
BMNHANDW            A
BMNHEADH            14
BMNHEADW            14
BMNHEIGH            50
BMNINIT             1572
BMNLINECL           0
BMNLINEH            5
BMNLINEW            32
BMNMASKH            5
BMNMASKW            18
BMNNECKH            2
BMNNECKW            A
BMNNRMCL            FFFFFF
BMNPLOT             1602
BMNPOSX             2BBE
BMNPOSY             2BC0
BMNPUPILH           1
BMNPUPILW           1
BMNSKINCL           DCDCFF
BMNSPEED            9
BMNUPD              158C
BMNUPD:CHKRT        15E4
BMNUPD:END          1600
BMNUPD:ENDCICLE     15BC
BMNWIDTH            32
BOMBDMG             1
BOMBFILCL           0
BOMBFRAG            5
BOMBINIT            18C4
BOMBPENCL           0
BOMBPLOT            19A2
BOMBSCORE           5
BOMBSIZE            1E
BOMBUPD             18EE
BOMBUPD:CATCH       198E
BOMBUPD:COLPLAY     1900
BOMBUPD:DMG         194A
BOMBUPD:END         193E
BOMBUPD:EXPLODE     1972
BOMBUPD:KILL        1944
BOMBXPLO            1A66
BOMBXPLO:LOOP       1A6E
DMMALLOC            1208
DMMALLOC:END        1220
DMMBNUM             32
DMMBSIZE            40
DMMDATA             1F00
DMMFCOM             11E2
DMMFFND             11F0
DMMFIRST            1198
DMMFLOOP            11D6
DMMFRCOM            11AA
DMMFREE             1222
DMMFRFND            11B8
DMMFRLOP            119E
DMMFRSTO            11D0
DMMINIT             1176
DMMINIT:LOOP        1184
DMMNEXT             11BA
DMMNEXTO            11F2
DMMSYSID            0
FIREFILCL           5A70BD
FIREPENCL           5A70BD
GAMEOVERB           2BB0
GOVSTRC             FFFFFF
GOVSTRX             23
GOVSTRY             F
INTPRSC             FFFFFF
INTPRSX             1F
INTPRSY             1A
INTTITC             FF
INTTITX             1F
INTTITY             5
KBDBITDN            3
KBDBITF1            4
KBDBITF2            5
KBDBITF3            6
KBDBITLF            0
KBDBITPS            7
KBDBITRT            2
KBDBITUP            1
KBDCHRDN            28
KBDCHRLF            25
KBDCHRMK            4D
KBDCHRPK            50
KBDCHRRT            27
KBDCHRSH            10
KBDCHRSP            20
KBDCHRUP            26
KBDDOWN             28
KBDEDGE             1EDD
KBDFIRE1            20
KBDFIRE2            4D
KBDFIRE3            10
KBDINIT             10A6
KBDLEFT             25
KBDMSKDN            8
KBDMSKF1            10
KBDMSKF2            20
KBDMSKF3            40
KBDMSKLF            1
KBDMSKPS            80
KBDMSKRT            4
KBDMSKUP            2
KBDPAUSE            50
KBDREAD             10BC
KBDREAD:DOWN        1112
KBDREAD:FIN         1162
KBDREAD:FIRE1       1122
KBDREAD:FIRE2       1132
KBDREAD:FIRE3       1142
KBDREAD:PAUSE       1152
KBDREAD:RIGHT       1102
KBDREAD:UP          10F2
KBDRIGHT            27
KBDTRAP             0
KBDUP               26
KBDVAL              1EDC
PAUSTITX            19
PAUSTITY            F
PLRCLIFE            3
PLRDMG              2BBC
PLRDMGCL            FF
PLRENER             2BB6
PLRHEIGH            14
PLRINIEN            1F4
PLRINIT             1392
PLRLIFE             2BBA
PLRLIFEC            FF
PLRLIFEH            14
PLRLIFEY            1B8
PLRNRMCL            696969
PLRPBDMG            1
PLRPLOT             13FE
PLRPLOT:HEART       14C4
PLRPLOT:NODMG       141A
PLRPLOT:SCORESTR    156A
PLRPMDMG            2
PLRPOSX             2BB2
PLRPOSY             2BB4
PLRSCORE            2BB8
PLRSPEED            A
PLRTXTCL            FFFFFF
PLRTXTX             2
PLRTXTY             1
PLRUBDMG            0
PLRUMDMG            1
PLRUPD              13B2
PLRUPD:CHKRT        13D8
PLRUPD:NODMG        13B2
PLRUPD:NOFIRE       13FA
PLRWIDTH            37
PLRWTRCL            FF8000
SCRCYCCT            1EDF
SCRHEIGH            1E0
SCRINIT             101C
SCRINTCT            1EDE
SCRIRQ              1
SCRISR              107E
SCRTIM              14
SCRTRAP             1
SCRUPD              108C
SCRWIDTH            280
SHTHEIGH            3
SHTSPEED            A
SHTTYPE             1
SHTWIDTH            14
SPWUPD              1AA4
SPWUPD:END          1ACA
STAGAME             1C28
STAGOVR             2
STAGOVRP            1E3C
STAGOVRP:GOVSTR     1E70
STAGOVRU            1DDE
STAGOVRU:END        1E22
STAGOVRU:GAMEOVER   1E24
STAGOVRU:NEXT       1DF2
STAINIT             1BEA
STAINTR             0
STAINTRP            1CDA
STAINTRP:PRSSTR     1D46
STAINTRP:TITSTR     1D38
STAMENU             1C00
STAMENU:END         1C26
STANONE             FFFFFFFF
STAPAUS             1D5A
STAPAUS:NEXT        1D82
STAPAUSP            1D84
STAPAUSP:NEXT       1DBE
STAPAUSP:PAUSSTR    1DC0
STAPLAY             1
STAPLOT             1CD0
START               1E7E
START:LOOP          1E86
START:SKIP          1EBC
START:WINT          1E90
STATE               2BA8
STATEP              2BAC
STATES              2B80
STATESP             2B98
STAUPD              1C40
STAUPD:FIN          1CBC
STAUPD:NEXT         1C86
STAUPD:NOTOVER      1C6C
STAUPDP             1CBE
STAUPDP:END         1CCE
SYSCOUNT            1E7C
SYSINIT             1000
SYSKONST            3E8
UTLCHCOL            1240
UTLCHCOL:END        126E
UTLCHCOL:NOCOL      126C
UTLINIT             1238
UTLLOCT             254
UTLRAND             1274
UTLRAND:RANDVEC     1292
UTLRNDIX            2BC4
UTLSFIL             12A
UTLSND              37C
UTLSPEN             0
WICKFILCL           727272
WICKPENCL           727272
XPLFILCL            CCCCCC
XPLINIT             1AD0
XPLPENCL            DDDDDD
XPLPLOT             1B3E
XPLSIZE             14
XPLTYPE             3
XPLUPD              1B00
XPLUPD:END          1B34
XPLUPD:KILL         1B38
